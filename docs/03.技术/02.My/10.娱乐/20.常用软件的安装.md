---
title: 常用软件的安装
date: 2025-03-23 16:42:32
permalink: /pages/45f3b8/
author: 
  name: LiuShuixiu
  link: https://github.com/liushuixiu
---
# 常用软件的安装

前言：本章节主要记录一些折腾过的应用程序在32位系统上的安装方法和下载地址，照着安装步骤一步步实施基本上能够正常运行；但前提是你已经完成了上一章开发环境的安装，如果分不清那那些应用需要哪些运行环境，那就都装上，可保万无一失。

> [!IMPORTANT]
>
> 1.本章的频繁出现的目录"~/software_home"是本篇笔记统一存放程序的目录。
>
> 2.命令中凡是没有提示“sudo su”或使用“sudo”的命令，均是在普通用户下安装的程序；docker篇除外。
>
> 3.GitHub 加速地址：https://github.moeyy.xyz/	|	https://gh.llkk.cc/
>
> 4."OMV 7"默认安装的nginx默认运行用户为"www-data"，默认网页根目录为"/var/www"。

## 资源监控： 

### btop

简介：一款高颜值的资源监视器，可以显示处理器、内存、磁盘、网络和进程的使用情况和统计信息。

![image-20241021221056025](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410212211936.png)

**包管理器安装**

> 安装方便，但是一般不是最新的版本。

```
# 更新应用缓存列表
sudo apt update
# 安装btop
sudo apt install btop -y
# 启动btop
btop
```

**手动安装**

> 二进制程序 [btop-i686-linux-musl.tbz](https://github.com/aristocratos/btop/releases/download/v1.3.2/btop-i686-linux-musl.tbz) | [Releases](https://github.com/aristocratos/btop/releases) | [Github](https://github.com/aristocratos/btop)

(1) 用户目录程序文件

```
# 进入用户目录
cd ~
# 创建一个同一存放三方程序的目录 software_home
mkdir ./software_home

# 下载btop-i686-linux-musl.tbz到本地
wget https://github.moeyy.xyz/https://github.com/aristocratos/btop/releases/download/v1.4.0/btop-i686-linux-musl.tbz
# 解压文件
tar -jxvf btop-i686-linux-musl.tbz -C ./software_home
```

(2) 安装程序

```
# 安装btop
cd ./software_home/botp
sudo make install
# 验证安装
btop -v
```

(3) 启动程序

```
# 启动
btop

# 卸载：
cd ./software_home/botp
sudo make uninstall
```

帮助文档：

[Btop++ 官方文档（gitee）](#https://gitee.com/link?target=https://github.com/aristocratos/btop/releases/latest) | [btop官方文档 (github.com)](https://github.com/aristocratos/btop) 

### glances

简介：Glances是一款开源系统跨平台监控工具。它可以实时监控系统的各个方面，如CPU、内存、磁盘、网络使用情况等。它还可以监控正在运行的进程、登录用户、温度、电压、风扇速度等。它还支持容器监控、支持Docker、LXC等不同的容器管理系统。该信息显示在易于阅读的仪表板中，也可用于通过网络界面或命令行界面远程监控系统。它易于安装和使用，并且可以自定义以仅显示您感兴趣的信息。详见[Github](https://github.com/nicolargo/glances)。

![7741f645-1bf5-4485-9286-1902fa09af72](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410212251344.png)

1、安装主程序

(1) **包管理器安装**

> 安装方便，但是一般不是最新的版本，且没有web界面，比较适合命令行使用。

```
# 更新应用程序缓存
sudo apt update
# 安装glances
sudo apt install glances -y
# 启动
glances
```

(2) **使用pipx安装**

&nbsp;&nbsp;&nbsp;&nbsp;需要提前安装好pipx管理器，未安装看之前内容。优点是可以避免pip与apt包管理器冲突，安装成功会自动链接到 "~/.local/bin" 目录中。

> 安装
>
> ```
> pipx install "glances[web]"
> ```
>
> 启动命令
>
> ```
> glances			# 独立模式监控监控本地信息
> glances -w		# web模式
> ```
>
> WebUI管理地址：http://<ip>:61208
>
> ```
> # <ip>为实际ip地址；默认端口"61208"
> 例：http://192.168.1.54:61208
> # WebUI 默认账号/密码：glances/glances
> ```

> 其他命令
>
> ```
> # 升级glances
> pipx upgrade "glances[web]"
> # 卸载glances
> pipx uninstall glances
> 
> # 更改用户名/密码；输入指令后连续输入两次用户名/密码，再输入"Yes"确认保存。修改的内容被保存在本地"~/.config/glances/<username>.pwd"文件中。
> glances -w --username
> glances -w --password
> ```

(3) **使用Python虚拟环境**

&nbsp;&nbsp;&nbsp;&nbsp;需要提前安装python3-venv虚拟环境，未安装看前文。优点是可解决“pip install”提示“apt”和“pip”包管理器冲突，适合pipx无法安装程序时使用。这里安装的是glance主程序的web版，带有webui展示页。

> 进入虚拟环境
>
> ```
> # 进入用户目录
> cd ~
> # 创建虚拟环境
> python3 -m venv ~/software_home/glances
> # 激活虚拟环境
> source ~/software_home/glances/bin/activate
> ```
>
> 安装程序
>
> ```
> # 安装glances的web版
> pip3 install "glances[web]"
> # 退出虚拟环境
> deactivate
> ```
>
> 创建软连接
>
> ```
> # 这里仅添加到当前的用户"bin"目录中
> ln -s ~/software_home/glances/bin/glances ~/.local/bin/
> ```
>
> 启动命令
>
> ```
> glances			# 独立模式监控监控本地信息
> glances -w		# web模式
> ```

> 其他命令
>
> ```
> # 升级glances
> source ~/software_home/glances/bin/activate
> pip3 install --upgrade "glances[web]"
> deactivate
> 
> # 卸载glances
> sudo su- && source /home/user/glances/bin/activate
> pip3 uninstall glances
> ```

4、为Web服务添加systemd服务

&nbsp;&nbsp;&nbsp;&nbsp;由于使用包管理器安装的glances没有WebUI，既不需要自启动也不适用此方法，故只在pipx和venv安装时才需要配置。首次启用WebUI密码，则需先通过命令行设置设置好登录密码，不启用可忽略，默认的账户名glances。

(1) 设置WebUI密码

> 不启用密码忽略这一步；

```
glances -w --password
```

(2) 编辑"glances@\<name\>.service"，"\<name\>"填写真实用户名，如 ”test“。

```
sudo nano /etc/systemd/system/glances@test.service
```

```
[Unit]
Description=Glances
Documentation=man:glances(1)
Documentation=https://github.com/nicolargo/glances
After=network.target

[Service]
User=%i
Restart=on-abort
RestartSec=30
ExecStart=/home/%i/.local/bin/glances -w -p 61208 -t 2 --password
# "-p"后为网页访问端口； "--password"启用web密码，不启用删掉；"-t"刷新数据的间隔时间，此处为2秒。

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start glances@test.service
sudo systemctl status glances@test.service
sudo systemctl enable glances@test.service
```

帮助文档:

[glances官方文档](https://github.com/nicolargo/glances) | [快速入门 — Glances 4.1.2 文档](#client-server-mode) | [Linux系统性能监控工具Glances](https://cloud.tencent.com/developer/article/1697737) | [如何安装和使用 Glances 监控 Ubuntu 22.04 系统](https://cn.linux-console.net/?p=13935) | [Linux 系统下使用Glances多功能监控工具](https://cloud.tencent.com/developer/article/1882972) | [pip(3) install，完美解决 ——apt和pip包管理器冲突的解决方法](https://www.yaolong.net/article/pip-externally-managed-environment/) 



## 数据库管理

### PhpMyAdmin

简介： PhpMyAdmin 是一个免费的开源的用 PHP 编写的基于 Web 的应用程序，用于从 Web 浏览器管理 MySQL 服务器。可以在 LAMP或 LEMP堆栈下运行，支持 MySQL 和 MariaDB 的常用操作，旨在为MySQL带来一个基于浏览器的可视化界面，使得管理数据库更加轻松，详看：[PhpMyAdmin·官网](https://www.phpmyadmin.net/)。

![image-20241024163549406](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410241635092.png)

程序包：[phpMyAdmin-5.2.1-all-languages.zip](https://files.phpmyadmin.net/phpMyAdmin/5.2.1/phpMyAdmin-5.2.1-all-languages.zip) | [Releases · PhpMyAdmin](https://github.com/phpmyadmin/phpmyadmin/releases) | [PhpMyAdmin·Github](https://github.com/phpmyadmin/phpmyadmin) 

1、安装主程序

(1) 用户目录下载程序包

```
cd ~

wget https://files.phpmyadmin.net/phpMyAdmin/5.2.1/phpMyAdmin-5.2.1-all-languages.zip
```

(2) 解压到网页根目录"www"，并更名；

```
sudo unzip phpMyAdmin-5.2.1-all-languages.zip -d /var/www

sudo mv /var/www/phpMyAdmin-5.2.1-all-languages/ /var/www/phpMyAdmin
```

(3) 修改用户和组为"www-data"，并赋予目录755权限

```
sudo chown -R www-data:www-data /var/www/phpMyAdmin
sudo chmod 755 /var/www/phpMyAdmin
```

(4) 删除安装"setup"目录

```
sudo rm -r /var/www/phpMyAdmin/setup
```

2、配置"config.inc.php"

(1) 创建"config.inc.php"文件

```
sudo cp /var/www/phpMyAdmin/config.sample.inc.php /var/www/phpMyAdmin/config.inc.php
```

(2) 编辑"config.inc.php"

> 使用"ctrl + w"检索定位"blowfish_secret"，并将[Blowfish生成器](https://phpsolved.com/phpmyadmin-blowfish-secret-generator/)生成的32 字符随机字符串填入单引号内。

```
sudo nano /var/www/phpMyAdmin/config.inc.php
```

```
# 将生成的32 字符随机字符串填入单引号内''内。
$cfg['blowfish_secret'] = '';; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */
```

3、添加Nginx配置文件

(1) 编辑“phpMyAdmin.conf”配置

```
sudo nano /etc/nginx/sites-available/phpMyAdmin.conf
```

```
server {
	# ipv4 和 ipv6 的监听端口
	listen       8393;
    listen       [::]:8393;
	# 自定义域名
	server_name  _;
	# 日志文件位置
    access_log  /var/log/nginx/phpmyadmin.access.log;
    error_log   /var/log/nginx/phpmyadmin.error.log;
	# 根目录
    root /var/www/phpMyAdmin;

    index index.php index.html;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # Pass PHP Scripts To FastCGI Server
    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/run/php/php8.2-fpm.sock; #depends on PHP versions
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.(?!well-known).* {
        deny all;
    }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/phpMyAdmin.conf /etc/nginx/sites-enabled/ 
```

(3) 加载nginx配置

```
sudo nginx -t
sudo nginx -s reload
```

帮助文档：

[Nginx 安装 phpMyAdmin](https://cn.linux-console.net/?p=2805) | [Nginx安装和保护PhpMyAdmin](https://blog.containerize.com/zh/how-to-install-and-secure-phpmyadmin-with-nginx-on-ubuntu/) | [Ubuntu安装phpMyAdmin + 配置nginx](https://cloud.tencent.com/developer/article/1352459) 

### Adminer

简介：Adminer是一个功能齐全的MySQL数据库管理工具，允许您管理数据库、表、列、关系、索引、用户和权限。它是一个免费的开源工具，可以安装在您的本地计算机或 Web 服务器上。 Adminer 是轻量级的，易于安装和使用，并且支持多种语言。详见： [Adminer · HOME](https://www.adminer.org/en/)

![image-20241025205540007](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410252055809.png)



程序包文件：[Adminer 4.8.1.php](https://github.com/vrana/adminer/releases/download/v4.8.1/adminer-4.8.1.php) | [MySQL 的 Adminer 4.8.1.php](https://github.com/vrana/adminer/releases/download/v4.8.1/adminer-4.8.1-mysql.php) 

> [!NOTE]
>
> kodbox(可道云)自带adminer，如果安装了它，可以省略这一步。

1、安装 adminer

(1) 用户目录下载程序包

```
cd ~

sudo wget https://github.moeyy.xyz/https://github.com/vrana/adminer/releases/download/v4.8.1/adminer-4.8.1.php -O /var/www/html/adminer.php
```

(2) 更改拥有者/组

```
sudo chown www-data:www-data /var/www/html/adminer.php
```

2、配置Nginx文件

(1) 编辑 "adminer.conf"，填入代码块中的内容

```
sudo nano /etc/nginx/sites-available/adminer.conf
```

```
server {
# 设置web访问端口；
        listen 8083; # 监听ipv4端口
        listen [::]:8083; # 监听ipv6端口
# 设置服务器名称，填写域名
        server_name localhost;
# 设置根目录。
        root /var/www/html;
# 设置index文件
        index adminer.php;
# 设置location块处理静态文件
        location / {
        try_files $uri $uri/ =404;
        }
# 设置location块处理piwigo的php脚本
        location ~ \.php$ {
        fastcgi_pass unix:/run/php/php8.2-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
        }
# 设置location块处理错误页面
        location = /50x.html {
        root /usr/share/nginx/html;
        }
}
```

(2) 创建软连接

```
sudo nano /etc/nginx/sites-available/adminer.conf /etc/nginx/sites-enabled/
```

(3) 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

帮助文档：[安装nginx和adminer](https://wenku.csdn.net/answer/2f938b2f797c4fefa050ff8967f56c1d) | 



## 下载工具：

### Aria2

简介：aria2 是一个轻量级的多协议和多源命令行下载实用程序。它支持HTTP / HTTPS 、FTP 、BitTorrent和Metalink 。aria2 可以通过内置的JSON-RPC和XML-RPC接口进行操作。

二进制文件：[aria2-1.37.0.tar.gz](https://github.com/aria2/aria2/releases/download/release-1.37.0/aria2-1.37.0.tar.gz) | [Releases ](https://github.com/aria2/aria2/releases) | [Github](https://github.com/aria2/aria2) | [aria2 官网](https://aria2.github.io/) 

#### aria2 原版

1、安装：

```
# 包管理器安装aria2原版。
sudo apt-get install -y aria2

# 安装OMV的下载插件版，包含"aria2"和"YouTube-dl"，根据喜好择一方法安装即可。
sudo apt-get install -y openmediavault-downloader
```

2、配置aria2

(1) 创建"aria2.conf"文件

> 存放路径可自定义，例如："~/software_home/aria2_data/aria2.conf"。填写精简版的内容。

```
nano ~/software_home/aria2_data/aria2.conf
```

```
# aria2.conf 精简版

# 默认保存文件的路径，此处为用户test目录下的downloads
dir=/home/test/downloads
 # 日志文件等级；只记录失败日志可以避免日志因内容过多积累而体积不断膨胀。
 log-level=error
 # 日志文件的保存路径
 log=/home/test/software_home/aria2_data/aria2.log
 # 读取断点续传信息，位置任意设置
 input-file=/home/test/software_home/aria2_data/aria2.conf
 # 保存断点续传信息，位置任意设置
 save-session=/home/test/software_home/aria2_data/aria2.conf
 # rpc连接口令，可任意设置
 rpc-secret=123456
 # rpc监听端口，可任意设置
 rpc-listen-port=6800
 # 允许所有来源, 默认:false
 rpc-allow-origin-all=true
 # 允许非外部访问, 默认:false
 rpc-listen-all=true
 # 禁用IPv6, 默认:false
 disable-ipv6=true
 # 启用RPC, 默认:false
 enable-rpc=true
 # 断点续传
 continue=true
 #同时最大任务数
 max-concurrent-downloads=5
 #最大并发数
 max-connection-per-server=16
```

(2) 创建"aria2.log"日志和”aria2.session“文件

> 与”aria2.conf“文件存放路径保持一致；例："~/software_home/aria2_data/aria2.session"。

```
# 创建"aria2.log"和”aria2.session“
touch ~/software_home/aria2_data/aria2.log ~/software_home/aria2_data/aria2.session
```

(3) 修改拥有者及权限；

```
# 修改用户名和组,test是真实的用户名和组,当拥有者不是当前用户时，才需要修改。
chown test:users ~/software_home/aria2_data/aria2.log ~/software_home/aria2_data/aria2.session

# 赋予权限："60"为只有拥有者有读写权限
sudo chmod 600 ~/software_home/aria2_data/aria2.log ~/software_home/aria2_data/aria2.session
```

3、添加systemd开机自启服务

(1) 编辑"aria2@\<name\>.service"，"\<name\>"修改为真实用户名，如test，用于运行程序。

```
nano /etc/systemd/system/aria2@test.service
```

```
[Unit]
Description=Aria2 RPC Server
After=network.target

[Service]
User=test
Type=simple
Restart=on-failure
RestartSec=30
ExecStart=/usr/bin/aria2c -c --conf-path=/home/test/software_home/aria2_data/aria2.conf
# 参数"--conf-path="后填配置文件"aria2.conf"存放的路径；

[Install]
WantedBy=multi-user.target
```

(2) 使配置生效

```
sudo systemctl daemon-reload
sudo systemctl enable aria2@test.service
sudo systemctl start aria2@test.service
sudo systemctl status aria2@test.service
```

#### ariaNG

简介：AriaNg 是一个让 aria2 更容易使用的现代 Web 前端. AriaNg 使用纯 html & javascript 开发, 所以其不需要任何编译器或运行环境. 您只要将 AriaNg 放在您的 Web 服务器里并在浏览器中打开即可使用. AriaNg 使用响应式布局, 支持各种计算机或移动设备。

![image-20241023065945405](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410230659354.png)

压缩包：[AriaNg-1.3.7.zip](https://github.com/mayswind/AriaNg/releases/download/1.3.7/AriaNg-1.3.7.zip) | [Releases](https://github.com/mayswind/AriaNg/releases) | [Aria2NG中文站](http://ariang.mayswind.net/zh_Hans/)

1、安装ariaNG：

(1) 用户目录下载程序包

```
# 进入用户目录
cd ~

# 下载：AriaNg-1.3.7.zip
wget -O https://github.com/mayswind/AriaNg/releases/download/1.3.7/AriaNg-1.3.7.zip
```

(2) 加压至网页根目录，并更改拥有者及权限。

```
# 解压至网页根目录"/var/www/"
sudo unzip AriaNg-1.3.7.zip -d /var/www/ariaNG

# 赋予目录权限755，并更改用户和组为"www-data"
sudo chmod -R 755 /var/www/ariaNG && sudo chown -R www-data:www-data /var/www/ariaNG
```

2、配置ariaNG：

(1) 编辑Nginx文件，并填写代码中块的内容：

```
sudo nano /etc/nginx/sites-available/ariaNG.conf
```

```
# ariaNG.conf

server{
  # 监听端口，任意设置
  listen 8386;
  listen [::]:8386;  
  server_name _;
  include /etc/nginx/mime.types;

  location / {
	# 自建目录，需要确保"root"后的路径与解压后文件的存放路径一致。
    root /var/www/ariaNG;
    index index.html index.html;
  }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/ariaNG.conf /etc/nginx/sites-enabled/
```

(3) 使配置生效

```
sudo nginx -t
sudo nginx -s reload
```

3、网页管理地址：

(1) 直接登陆管理页；

> 设置只保留在网页端。

```
http://<ip>:port
例：http://192.168.1.54:8386
```

(2) 免设置登陆（推荐），可配合导航页使用。

> <ip> 为真实IP地址；
>
> <Base64_rpc-key> 为经过Base64编码的rpc口令，[Base64 计算器](https://www.toolhelper.cn/EncodeDecode/Base64) 。

```
http://<ip>:8386/#!/settings/rpc/set/http/<ip>/6800/jsonrpc/<Base64_rpc-key>
```

#### aria2 增强版

简介：增强版脚本整合了 [Aria2 完美配置](https://github.com/P3TERX/aria2.conf)，在安装 Aria2 的过程中会下载这套配置方案，这套方案包含了配置文件、附加功能脚本等文件，用于实现 Aria2 功能的增强和扩展，提升 Aria2 的下载速度与使用体验，解决 Aria2 在使用中遇到的 BT 下载无速度、文件残留占用磁盘空间、任务丢失、重复下载等问题。详见：[Aria2 一键安装管理脚本 增强版 - github.com](https://github.com/P3TERX/aria2.sh) 

![image-20241023082638125](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410230826524.png)

1、安装步骤

```
# 安装基础组件wget、curl、ca-certificates
sudo apt install wget curl ca-certificates

# 下载并执行脚本
wget -N https://github.moeyy.xyz/https://raw.githubusercontent.com/P3TERX/aria2.sh/refs/heads/master/aria2.sh && chmod +x aria2.sh

# 执行脚本
sudo ./aria2.sh
```

2、安装成功显示信息

```
Aria2 简单配置信息：

 IPv4 地址      : 
 IPv6 地址      : 
 RPC 端口       : 6800
 RPC 密钥       :
 下载目录        : 
 AriaNg 链接    : http://ariang.js.org/#!/settings/rpc/set/ws/<ipv4>/6800/jsonrpc/<Base64_PRC-KEY>

[信息] Aria2 启动成功 !
```

帮助文档：

[Debian中安装并配置Aria2+WebUI教程](https://cloud.tencent.com/developer/article/2122806) | [Aria2 WebUI 界面搭建](https://blog.hclonely.com/posts/4b4a0e66/) | [Aria2在Debian11下的配置及脚本分享](#comment-waline) |

[Aria2 Manual — aria2 1.37.0 documentation](https://aria2.github.io/manual/en/html/) | [Aria2 前端面板-AriaNg 教程](https://p3terx.com/archives/aria2-frontend-ariang-tutorial.html) |

### qbittorrent

简介：qBittorrent 是一款开源免费的种子和磁力链接下载工具，qBittorrent 支持使用种子文件和磁力链接下载，包括了做种、tracker 编辑、下载优先级设置、RSS 订阅等功能非常丰富，同时支持 Windows、Mac 和 Linux，且功能非常强大，详见：[qBittorrent Official Website (kmjb.dev)](https://kmjb.dev/qBittorrent-website/download.html)。

![image-20241023095432806](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410230954344.png)

#### 原版

1、包管理器安装qBittorrent

```
sudo apt install -y qbittorrent-nox
```

2、配置systemd自启动

(1) 编辑"qbittorrent-nox@\<name\>.service"，将"\<name\>"改为真实用户名，如 test，用于运行程序；

```
sudo nano /etc/systemd/system/qbittorrent-nox@test.service
```

```
[Unit]
Description=qBittorrent-nox
After=network.target

[Service]
User=%i
Type=forking
RemainAfterExit=yes
ExecStart=/usr/bin/qbittorrent-nox -d

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start qbittorrent-nox@test.service
sudo systemctl enable qbittorrent-nox@test.service
```

3、WebUI登陆地址

```
默认端口（8080）：
http://localhost:8080

#默认- 用户名：admin
	- 密码：adminadmin
```

4、关于修改WebUI访问端口（三种方法）：

(1) 网页端修改端口号

```
设置->webui->端口
```

(2) 配置文件修改端口号，如：8088

Tips：若出现修改端口后，下载速度很低或者没有速度，在WebUI的“设置->连接->监听端口”处重新设置一个随机端口。

> 停止qbittorent
>
> ```
> sudo systemctl stop qbittorrent-nox@test.service
> ```
>
> 编辑 qBittorrent.conf
>
> ```
> nano ~/.config/qBittorrent/qBittorrent.conf
> ```
>
> "ctrl + w"检索“WebUI\Port=”，并自定义端口号
>
> ```
> WebUI\Port=8088
> ```
>
> 重新启动
>
> ```
> sudo systemctl restart qbittorrent-nox@test.service
> ```

(3) 启动时参数指定访问端口

> 临时指定
>
> ```
> /usr/bin/qbittorrent-nox -d --webui-port=8088
> ```
>
> 永久指定：将参数加入到"qbittorrent-nox@\<name\>.service"中。
>
> ```
> ExecStart=/usr/bin/qbittorrent-nox -d --webui-port=8088
> ```

#### 增强版

简介：qBittorrent-Enhanced-Edition基于原版qBittorrent重编译，增加了自动屏蔽迅雷等BT下载工具吸血、增强提供了IP过滤规则等高级功能，可以根据需要在选项自定义选择或自动更新tracker服务器，同时提供了自动禁止来自中国地区的IP未知客户端等功能。详见：[qBittorrent Enhanced -Github](https://github.com/c0re100/qBittorrent-Enhanced-Edition)。

二进制文件：[qbittorrent-enhanced-nox_i686-linux-musl_static.zip](https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases/download/release-4.6.7.10/qbittorrent-enhanced-nox_i686-linux-musl_static.zip) | [Releases](https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases) 

1、手动安装主程序

(1) 主目录下载程序

```
cd ~

wget "https://gh.llkk.cc/https://github.com/c0re100/qBittorrent-Enhanced-Edition/releases/download/release-4.6.7.10/qbittorrent-enhanced-nox_i686-linux-musl_static.zip" -O qbittorrent-enhanced.zip
```

(2) 解压至“qbittorrent_home”

```
mkdir -p ~/software_home/qbittorrent_home

unzip qbittorrent-enhanced.zip -d ~/software_home/qbittorrent_home/
```

2、配置systemd自启动服务

(1) 编辑 "qbittorrent-nox@\<name\>.service"，将"\<name\>"改为真实用户名，如 test，用于运行程序；

```
nano /etc/systemd/system/qbittorrent-nox@test.service
```

```
[Unit]
Description=qBittorrent-nox service for user %I
Documentation=man:qbittorrent-nox(1)
Wants=network-online.target
After=local-fs.target network-online.target nss-lookup.target

[Service]
User=%i
Type=forking
#RemainAfterExit=yes
ExecStart=/home/%i/software_home/qbittorrent_home/qbittorrent-nox -d
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

(2) 使配置生效

```
sudo systemctl daemon-reload
sudo systemctl start qbittorrent-nox@test.service
sudo systemctl enable qbittorrent-nox@test.service
```

3、WebUI登陆地址：http://localhost:8080

> 默认端口（8080）
>
> 默认用户名：admin
> 默认密码：adminadmin

#### 主题皮肤

**VueTorrent**

简介：VueTorrent使用 Vue.js 制作的 qBittorrent 美观的 WebUI，是Github上的一款开源的qBittorrent主题，支持多语言、深色和浅色主题，支持移动端查看，设置功能支持的也很全面，界面、行为、下载、连接、速度、BT、RSS、WebUI、标签和分类与原版别无二致。详见：[VueTorrent](https://github.com/VueTorrent/VueTorrent?tab=readme-ov-file#vuetorrent) 

![image-20241023095821792](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410230958279.png)

主题下载地址：[vuetorrent.zip](https://github.com/VueTorrent/VueTorrent/releases/download/v2.15.0/vuetorrent.zip) | [Releases](https://github.com/VueTorrent/VueTorrent/releases) 

1、安装主题

(1) 主目录下载主题

```
wget "https://gh.llkk.cc/https://github.com/VueTorrent/VueTorrent/releases/download/v2.15.0/vuetorrent.zip"
```

(2) 解压主题至 "qbittorrent_home"

```
unzip vuetorrent.zip -d ~/software_home/qbittorrent_home/
```

2、应用主题

> 登陆网页端-->设置-->WEBUI-->勾选"使用备用WebUI"-->填入“vuetorrent”主题的绝对路径-->保存。
>
> ```
> /home/test/software_home/qbittorrent_home/vuetorrent
> ```

#### tracker 服务器

1、设置方法：

(1) 原版UI：登陆网页端-->设置-->BitTorrent-->自动更新公共跟踪链接列表

(2) “vuetorrent”：登陆网页端-->设置-->增强-->自定义Tracker链接列表

2、tracker服务器列表

> Tracker列表1：[XIU2/TrackersListCollection](https://github.com/XIU2/TrackersListCollection/blob/master/README-ZH.md) 
>
> Tracker列表2：[trackerslist:BitTorrent trackers](https://github.com/ngosang/trackerslist?tab=readme-ov-file) 
>
> Tracker列表3：[稳定跟踪器列表 - newTrackon](https://newtrackon.com/list) 
>
> Tracker列表4：[中国可用的 BT Tracker 服务器列表，每24小时自动更新 ](https://www.yaozuopan.top/index.php/archives/1014/) 

参考文档：

[qbittorrent-nox的安装，开机启动和常用命令](https://www.tofzl.com/index.php/archives/19/) | [Ubuntu安装qbittorrent-nox](https://www.shiyanhe.com/166.html/) 

### qBittorrent-ClientBlocker

简介：一款适用于 qBittorrent (4.1+)/Transmission (3.0+, Beta)/BitComet (2.0+, Beta, Partial) 的客户端屏蔽器, 默认屏蔽包括但不限于迅雷等客户端，有效防止恶意IP吸血行为。详见：[qBittorrent-ClientBlocker·Github](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker)。

![Preview](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker/raw/dev/Preview.png)

> [!IMPORTANT]
>
> 前提：必须安装了qBittorrent/Transmission客户端并且启用了 Web UI 功能；

程序包：[qBittorrent-ClientBlocker-3.6b1-linux-386.tar.gz](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker/releases/download/3.6b1/qBittorrent-ClientBlocker-3.6b1-linux-386.tar.gz) | [Releases](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker/releases) 

1、安装程序

(1) 主目录下载程序

```
cd ~

wget https://github.moeyy.xyz/https://github.com/Simple-Tracker/qBittorrent-ClientBlocker/releases/download/3.6b1/qBittorrent-ClientBlocker-3.6b1-linux-386.tar.gz
```

(2) 解压到"clientBlocker"目录

```
mkdir -p ~/software_home/clientBlocker

tar zxf qBittorrent-ClientBlocker-3.6b1-linux-386.tar.gz -C ~/software_home/clientBlocker
```

(3) 编辑配置文件"config.json"

```
nano ~/software_home/clientBlocker/config.json
```

```
# 定位下方内容，并在引号内填写对应客户端"qBittorrent/Transmission"的WebUI端口、账户和密码；如：8080/admin/adminadmin；

"clientURL": "http://127.0.0.1:8080",
"clientUsername": "admin",
"clientPassword": "admin",
```

>更多配置需求：
>
>可根据高级需求, 按需设置配置, 具体见[配置 Config](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker#%E9%85%8D%E7%BD%AE-config)。
>若客户端屏蔽器运行于本机, 但未启用客户端 "跳过本机客户端认证" (及密码不为空且并未手动设置密码), 则必须修改配置文件, 并填写 clientPassword.
>若客户端屏蔽器不运行于本机 或 客户端未安装在默认路径 或 客户端不支持自动读取配置文件, 则必须修改配置文件, 并填写 clientURL/clientUsername/clientPassword.

2、添加systemd自启动服务

(1) 编辑"clientBlocker@\<name\>.service"，将"\<name\>"改为真实用户名，如 test，用于运行程序；

```
sudo nano /etc/systemd/system/clientblocker@test.service
```

```
[Unit]
Description=qBittorrent-ClientBlocker service
Wants=network-online.target
After=qbittorrent-nox.service

[Service]
User=%i
# 路径"/home/%i/software_home/clientBlocker"，可修改为自定义路径。
WorkingDirectory=/home/%i/software_home/clientBlocker
ExecStart=/home/%i/software_home/clientBlocker/qBittorrent-ClientBlocker
Restart=always
RestartSec=5s
KillMode=mixed

#StandardOutput=null
#StandardError=syslog

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start clientblocker@test.service
sudo systemctl status clientblocker@test.service
sudo systemctl enable clientblocker@test.service
```

帮助文档：[qBittorrent-ClientBlocker 常规版本使用](https://github.com/Simple-Tracker/qBittorrent-ClientBlocker?tab=readme-ov-file#常规版本使用) | 

### transmission

简介：Transmission是一款免费开源、简洁、免登录、无广告、不限速的一款纯粹的BT/磁力下载工具，同样是由一些志愿者共同开发的，由C语言开发而成（Mac OS上用的是Objective-C），支持版权敏感资源下载，硬件资源消耗极少，界面极度精简。详见：[Transmission官网](https://transmissionbt.com/) 

![image-20241023113408254](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410231134836.png)

#### 使用Debian仓库安装

1、安装主程序

```
sudo apt-get install -y transmission-daemon

# 验证安装
transmission-daemon -V
```

2、修改配置

(1) 停止transmission服务

> 未停止服务，修改的内容会被覆盖，导致修改无效；

```
sudo systemctl stop transmission-daemon.service
```

(2) 编辑“settings.json”；

> 通过"ctrl + w"检索定位

```
sudo nano /var/lib/transmission-daemon/info/settings.json
或：
sudo nano /etc/transmission-daemon/settings.json
```

```
# 访问是否需要密码，true & false；关闭后访问WebUI不需要密码
 "rpc-authentication-required": true,

# WebUI访问的账户和密码,默认：transmission ;密码通常是加密内容，直接在双引号内填入密码即可，如 "1234";
 "rpc-username": "transmission",
 "rpc-password":"{605261812b54bcf143dd0c26767080b86ff4db7biXs23JrR",

# 是否开启IP 地址白名单，true & false；关闭后所有IP可访问WebUI，访问WebUI时"403"则需要关闭；
 "rpc-whitelist-enabled": true,

# 访问WebUI的端口，默认是9091；
 "rpc-port": 9091,
 
# 下载文件的目录
"download-dir":
```

(3) 启动服务使配置生效

```
sudo systemctl start transmission-daemon.service
```

> 其他命令
>
> ```
> # 启动
> sudo systemctl start transmission-daemon.service
> /etc/init.d/transmission-daemon start
> # 停止
> sudo systemctl stop transmission-daemon.service
> /etc/init.d/transmission-daemon stop
> # 重启
> sudo systemctl restart transmission-daemon.service
> /etc/init.d/transmission-daemon restart
> # 状态
> sudo systemctl status transmission-daemon.service
> /etc/init.d/transmission-daemon status
> ```

3、WebUI登陆地址：http://localhost:9091

> 默认账号密码：transmission / transmission
>
> 默认端口：9091

#### 手动安装二进制程序

> 二进制程序：[移动云盘-提取码:wz9v](https://caiyun.139.com/m/i?2iWTzgtsExnjr) | 

1、安装主程序

(1) 下载二进制程序，并上传至用户目录；

(2) 解压至"software_home"目录

```
cd ~

tar zxf transmission-daemon-4.0.6-linux-i386.tar.gz -C ~/software_home/
```

2、添加systemd服务

(1) 将systemd文件拷贝到systemd目录，并更名。

> 名字格式"transmission-daemon@\<name\>.service"，"\<name\>"填写真实用户名，如 ”test“。

```
sudo mv ~/software_home/transmission/transmission-daemon.service ~/software_home/transmission/transmission-daemon@test.service
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start transmission-daemon@test.service 
sudo systemctl status transmission-daemon@test.service 
sudo systemctl enable transmission-daemon@test.service 
```

3、WebUI登陆地址：http://localhost:9091

> 默认账号密码：transmission / transmission
>
> 默认端口：9091

#### 使用源码安装

&nbsp;&nbsp;&nbsp;&nbsp;目前官网没有提供32为可用的二进制程序，最新的4.0.6版本，需要通过源码安装，后续的更新也需要自行编译安装，后文主要记录编译安装的过程。

> 源码包：[transmission-4.0.6.tar.gz](https://github.com/transmission/transmission/releases/download/4.0.6/transmission-4.0.6.tar.xz)  |  [Releases](https://github.com/transmission/transmission/releases) | [Transmission · Github](https://github.com/transmission/transmission) 

1、安装主程序

(1) 用户目录下载源码包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/transmission/transmission/releases/download/4.0.6/transmission-4.0.6.tar.xz
```

(2) 解压源码包

```
tar -zxvf transmission-4.0.6.tar.gz
```

(3) 安装编译组件

```
sudo apt install -y build-essential cmake git libcurl4-openssl-dev libssl-dev libb64-dev libdeflate-dev libevent-dev libminiupnpc-dev libnatpmp-dev libpsl-dev libsystemd-dev build-essential make
```

(3) 开始编译

```
# 创建程序目录，已有可以忽略这一步；
mkdir -p ~/software_home
# 进入源码目录
cd ~/transmission-4.0.6
# 设置编译选项；"-DCMAKE_INSTALL_PREFIX="后跟要安装的位置,"test"改位真实用户名。
cmake -B build -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_INSTALL_PREFIX=/home/test/software_home/transmission
# 进入编译目录
cd build
# 开始编译
cmake --build .
# 安装程序；若安装到"/bin"或"/sbin"目录，需要使用root用户执行，也可加sudo命令实现。
cmake --install .
```

(4) 创建软连接

> "test"需要改为真实用户名。

```
ln -s /home/test/software_home/transmission/bin/transmission-daemon /home/test/.local/bin
```

2、编辑配置文件

&nbsp;&nbsp;&nbsp;&nbsp;首次安装需要启动一次，产生配置文件到用户目录下"~/.config/transmission/settings.json"，编辑这个文件才能通过网页访问，并且修改配置需要在程序关闭状态下才能生效。

(1) 产生配置文件

> 启动
>
> ```
> transmission-daemon
> ```
>
> 关闭程序
>
> ```
> sudo kill $(pidof transmission-daemon)
> ```

(2) 编辑 "setting.conf"配置文件

> 使用"ctrl + w" 检索定位对应内容，修改后使用"ctrl + x"保存退出。

```
nano ~/.config/transmission-daemon/settings.json
```

```
"rpc-whitelist-enabled": true,
# 是否开启IP 地址白名单，true & false；"false"为关闭，则所有IP都可访问WebUI管理页面；若访问WebUI时出现"403"错误页，则需要设为关闭；
 
 "rpc-authentication-required": true,
# 访问是否需要密码，true & false；"false"为关闭，则WebUI访问管理页不需要密码；

 "rpc-username": "transmission",
 "rpc-password":"{605261812b54bcf143dd0c26767080b86ff4db7biXs23JrR",
# WebUI访问的账户和密码,默认：transmission ;密码通常是加密显示，直接在双引号内填入密码即可，如 "1234";

 "rpc-port": 9091,
# 访问WebUI的端口，默认是9091；
 
"download-dir":
# 下载文件的目录,默认是用户目录的"download";
```

3、添加systemd自启动服务

(1) 编辑"transmission-daemon.service"文件

> 修改"User"和"ExecStart"文件路径

```
nano ~/transmission-4.0.6/daemon/transmission-daemon.service
```

```
# "User"后"transmission" 改为 "%i"
User=%i
# "/usr/bin/transmission-daemon" 改为软连接路径；
ExecStart=/home/%i/.local/bin/transmission-daemon -f --log-error
```

(2) 拷贝文件到systemd目录，并更名。

> 名字格式"transmission-daemon@\<name\>.service"，"\<name\>"填写真实用户名，如 ”test“。

```
sudo cp ~/transmission-4.0.6/daemon/transmission-daemon.service /etc/systemd/system/transmission-daemon@test.service 
```

> 加载服务

```
sudo systemctl daemon-reload
sudo systemctl start transmission-daemon@test.service 
sudo systemctl status transmission-daemon@test.service 
sudo systemctl enable transmission-daemon@test.service 
```

4、网页访问：http://localhost:9091

> 默认账号密码：transmission / transmission
>
> 默认端口：9091

#### 主题皮肤

Transmission-Web-Control

简介："transmission-web-control"是一款定制版的Web UI，为Transmission提供了一个功能丰富且易用的增强界面；不仅允许您添加种子文件或URL，还支持拖放操作来上传种子。它包含了对Transmission设置的在线修改功能，如下载目录、速度限制和端口等；详解：[ronggang/transmission-web-control · Github](https://github.com/ronggang/transmission-web-control) 

![image-20241023115535412](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410231155952.png)

1、脚本一键安装主题

&nbsp;&nbsp;&nbsp;&nbsp;主题于2020年后没有更新，最总版本v1.6.1，一键安装只是适用与v4.0以下的transmission，如：Debian仓库安装的transmission-v3.0。

(1) 下载并执行脚本

> 有科学上网环境
>
> ```
> wget https://github.com/ronggang/transmission-web-control/raw/master/release/install-tr-control-cn.sh && sudo bash install-tr-control-cn.sh
> ```
>
> 修改加速版，不需要科学上网
>
> ```
> wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/install-tr-control-cn.sh && sudo bash install-tr-control-cn.sh
> ```

(2) 替换原版UI文件

> 将"/path/src"下的所有文件，覆盖到"/path/web"目录下。

```
sudo cp -a "/usr/share/transmission/web/transmission-web-control-master/src/." "/usr/share/transmission/web/"
```

2、手动安装主题

>transmission-v4.0.0之后，主题目录名有所变化，从"web"改为"public_html"，无法使用脚本直接安装，不过可以下载主题包文件进行覆盖。

(1) 用户目录下载主题

> 主题包：[自打包 - theme-transmission.tar.gz](https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/theme-transmission.tar.gz) | [Source code(tar.gz)](https://github.com/ronggang/transmission-web-control/archive/refs/tags/v1.6.1-update1.tar.gz) |[Releases](https://github.com/ronggang/transmission-web-control/releases) 

```
cd ~

# 下载"自打包版"
wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/theme-transmission.tar.gz
```

(2) 解压至主题目录

```
tar -zxvf theme-transmission.tar.gz -C ~/software_home/transmission/share/transmission
```

参考文档：[transmission-web-control-CN · Github](https://github.com/ronggang/transmission-web-control/wiki/Home-CN) | [Debian 手动安装tran、设置中文主题](https://262235.xyz/index.php/archives/510/) | [Ubuntu/Debian安装tran及美化](https://blog.xwyue.com/1048.html) | [Tran 配置文件参数解释](https://hackfang.me/transmission-webui-config) | [Debian 12 编译环境安装](https://github.com/transmission/transmission/blob/main/docs/Building-Transmission.md) | [源码安装](https://github.com/transmission/transmission/tree/main?tab=readme-ov-file#building-transmission-from-git-first-time) | [使用手册· Github](https://github.com/ronggang/transmission-web-control/wiki/Home-CN) | 

## 索引

### Jackett

简介：Jackett 是跨平台的开源应用，支持 OSX ，Windows 和 Linux 平台，集成了众多种子站的索引index工具，可以通过API接口，把这些种子站的数据提供给Sonarr、Radarr、qBittorrent用或者是制作RSS订阅，并且也可以在Jackett来聚合搜索。详见：[Jackett·Github](https://github.com/Jackett/Jackett)。

### Prowlarr

Prowlarr 是一个索引器管理器/代理，构建在流行的 *arr .net/reactjs 基础堆栈之上，用于与您的各种 PVR 应用程序集成。Prowlarr 是 Radarr 和 Sonarr 的分叉版，主要修复与它们相关的问题，是专为（Radarr、Sonarr）此类应用程序而设计的索引管理器/代理。支持 Torrent 跟踪器和 Usenet 索引器的管理，作用类似于Jackett，但是又比Jackett更强大。它可以无缝与Lidarr、Mylar3、Radarr、Readarr和Sonarr集成，自动将配置好的索引器同步到以上几款工具中，还可以直接管理下载器。详见：[Prowlarr·Github](https://github.com/Prowlarr/Prowlarr)。

![image-20241211212652468](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202412112127420.png)

二进制文件：[Prowlarr.develop.1.28.0.4862.linux-core-x86.tar.gz](https://github.com/Prowlarr/Prowlarr/releases/download/v1.28.0.4862/Prowlarr.develop.1.28.0.4862.linux-core-x86.tar.gz) | [Releases](https://github.com/Prowlarr/Prowlarr/releases) 

1、安装主程序

(1) 用户目录下载二进制文件

```
wget https://github.moeyy.xyz/https://github.com/Prowlarr/Prowlarr/releases/download/v1.28.0.4862/Prowlarr.develop.1.28.0.4862.linux-core-x86.tar.gz
```

(2) 解压至"software_home"

```
tar zxf Prowlarr.develop.1.28.0.4862.linux-core-x86.tar.gz -C ~/software_home/
```

2、添加systemd服务

(1) 编辑"prowlarr@\<name\>.service"，"\<name\>"改为真实用户名，如 test，用于运行程序。

```
sudo nano /etc/systemd/system/prowlarr@test.service
```

```
[Unit]
Description=Prowlarr
Documentation=https://github.com/Prowlarr/Prowlarr
After=network.target
Wants=network.target

[Service]
User=%i
Restart=on-abnormal
RestartSec=5s
KillMode=mixed
WorkingDirectory=/home/%i/software_home/Prowlarr
ExecStart=/home/%i/software_home/Prowlarr/Prowlarr

#StandardOutput=null
#StandardError=syslog

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start prowlarr@test.service
sudo systemctl status prowlarr@test.service
sudo systemctl enable prowlarr@test.service
```

3、管理页地址

> 默认端口：9696

```
http://<ip>:port
例：http://192.168.1.54:9696
```

帮助文档：[Prowlarr Contributing · Wiki](https://wiki.servarr.com/prowlarr/contributing) 

### Sonarr

简介：Sonarr是一款剧集订阅工具，它可以帮助你自动跟踪你所订阅的剧集，只要设置好关联的下载工具，就可以在剧集更新之后自动下载，并整理，对美剧的支持度很好，对日剧的支持度为0，对动画片的支持度一般，在持续不断的改进中，目前的主线版本Sonarr2已停止功能性开发，所有的新功能特性已全部并入到Sonarr3分支中。详见：[Sonarr·Github](https://github.com/Sonarr/Sonarr)。

### Radarr

简介：Radarr是Sonarr的分支，去掉了剧集功能，添加了电影下载功能，是 Usenet 和 BitTorrent 用户的电影收藏管理器。它可以监视新电影的多个 RSS 源，并将与客户端和索引器交互以获取、排序和重命名它们。还可以将其配置为在有质量更好的格式可用时自动升级库中现有文件的质量。 请注意，仅支持给定影片的一种类型。如果您同时想要给定电影的 4k 版本和 1080p 版本，则需要多个实例。当前master主线已经停止功能性开发，所有的新功能特性已全部并入到Radarr3分支中，详见：[Radarr·Github](https://github.com/Radarr/Radarr)。

![image-20241211215434387](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202412112154235.png)

二进制文件：[Radarr.develop.5.16.1.9508.linux-core-x86.tar.gz](https://github.com/Radarr/Radarr/releases/download/v5.16.1.9508/Radarr.develop.5.16.1.9508.linux-core-x86.tar.gz) | [Releases](https://github.com/Radarr/Radarr/releases) 

1、安装主程序

(1) 用户目录下载二进制文件

```
cd ~

wget https://github.moeyy.xyz/https://github.com/Radarr/Radarr/releases/download/v5.16.1.9508/Radarr.develop.5.16.1.9508.linux-core-x86.tar.gz
```

(2) 解压至"software_home"

```
tar zxf Radarr.develop.5.16.1.9508.linux-core-x86.tar.gz -C ~/software_home/
```

2、添加systemd服务

(1) 编辑"radarr@\<name\>.service"，"\<name\>"改为真实用户名，如 test，用于运行程序。

```
sudo nano /etc/systemd/system/radarr@test.service
```

```
[Unit]
Description=Radarr
Documentation=https://github.com/Radarr/Radarr
After=network.target
Wants=network.target

[Service]
User=%i
Restart=on-abnormal
RestartSec=5s
KillMode=mixed
WorkingDirectory=/home/%i/software_home/Radarr
ExecStart=/home/%i/software_home/Radarr/Radarr

#StandardOutput=null
#StandardError=syslog

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start radarr@test.service
sudo systemctl status radarr@test.service
sudo systemctl enable radarr@test.service
```

3、管理页地址

> 默认端口：7878

```
http://<ip>:port
例：http://192.168.1.54:7878
```

帮助文档：[Prowlarr Contributing · Wiki](https://wiki.servarr.com/prowlarr/contributing) 

## 云盘：

### Alist

简介：alist是一个支持多种存储的文件列表程序，使用 Gin 和 Solidjs，是轻量级的文件列表和分享服务，它可以帮助用户快速搭建一个文件分享服务器。alist支持多种存储方式，如阿里云盘、夸克网盘、本地硬盘等，方便用户在不同场景下使用。详情：[Home | AList (nn.ci)](https://alist.nn.ci/zh/) 

![image-20241024104835228](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410241048477.png)

二进制文件：[alist-linux-386.tar.gz](https://github.com/AlistGo/alist/releases/download/v3.38.0/alist-linux-386.tar.gz) | [Releases · Alist](https://github.com/AlistGo/alist/releases) | [Alist-Github](https://github.com/AlistGo/alist) 

1、安装主程序

(1) 用户目录下载程序文件

```
cd ~
wget https://gh.llkk.cc/https://github.com/AlistGo/alist/releases/download/v3.38.0/alist-linux-386.tar.gz
```

(2) 解压文件到"alist_home"

```
mkdir -p ~/software/alist_home

tar -zxvf alist-linux-386.tar.gz -C ~/software/alist_home
```

(3) 更改拥有者及权限

```
# 授予程序执行权限：
chmod +x ~/software/alist_home/alist
```

(4) 启动命令

```
~/software/alist_home/alist server
```

(5) 管理地址：http://<ip>:5244

> "<ip>"为真实IP地址。
>
> 默认用户名：admin
>
> 默认密码：首次启动可见；忘记密码看后文"关于命令行修改密码"内容。

2、配置文件及必要修改项

(1) 编辑配置文件"config.json"；

>  通过"ctrl + w"检索必要修改项

```
nano ~/software/alist_home/data/config.json
```

```
# 网页访问端口
"http_port": 5244,
# 临时目录路径，下载过程中临时存放文件，更改位置到容量更大的磁盘可以减少因容量不足导致的下载失败。
"temp_dir": "data/temp",
```

(2) 配置systemd服务

> 编辑"alist@\<name\>.service"，"\<name\>"填写真实用户名，如 ”test“，用于执行程序。

```
sudo nano /usr/lib/systemd/system/alist@test.service
```

```
[Unit]
Description=alist
After=network.target

[Service]
User=%i
Type=simple
Restart=on-failure
WorkingDirectory=/home/%i/software/alist_home
ExecStart=/home/%i/software/alist_home/alist server

[Install]
WantedBy=multi-user.target
```

(3) 加载systemd配置

```
systemctl daemon-reload
systemctl start alist
systemctl enable alist
systemctl status alist
```

> 其他命令
>
> ```
> sudo systemctl stop alist
> sudo systemctl disable alist
> sudo systemctl restart alist
> ```

(4) 关于命令行修改密码

```
# 高于v3.25.0版本
# 随机生成一个密码
./alist admin random
# 手动设置一个密码 `NEW_PASSWORD`是指你需要设置的密码
./alist admin set NEW_PASSWORD
```

3、设置离线下载

(1) alist网页端，登陆管理员账户-->管理-->设置-->其他；

Aria2

> Aria2 地址：http://localhost:6800/jsonrpc ；"localhost"安装aria2的机器IP地址，alist与aria2同在一台机器填此字符；"6800"是”aria2.conf“中设置的RPC监听端口“ rpc-listen-port=6800”；
>
> Aria2 密钥：123456；”aria2.conf“中设置的RPC密钥，"rpc-secret=123456"
>

qBittorrent

> qBittorrent链接：http://admin:123456@localhost:8385/ ；"admin"是qbittorrent设置的用户名，"123456"是密码，"localhost"是机器地址，此处alist与qbittorrent同在一个机子。

![image-20241024123505435](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410241235950.png)

(2) 关于"发送到Aria2"和侧栏"使用Aria2离线下载"的区别

发送到Aria2：

&nbsp;&nbsp;&nbsp;&nbsp;直接使用aira2下载默认下载位置。需提前在侧栏"本地设置"中填写"Aria2 RPC 链接"和"Aria2 RPC 密钥"。

![image-20241024122821154](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410241228712.png)

侧栏-使用Aria2离线下载：

&nbsp;&nbsp;&nbsp;&nbsp;先离线下载，然后在上传到指定的网盘/目录中；具体操作是在alist网页端中，自行进入需指定的下载目录后，通过侧栏"离线下载"选择"aria2"，粘贴下载链接后进行下载。如需要保留上传的文件则增加选择“从不删除”。

![image-20241024123237176](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410241232698.png)

帮助文档：

[手动安装及守护进程设置 | AList文档 (nn.ci)](https://alist.nn.ci/zh/guide/install/manual.html) | [其他设置-离线下载 | AList文档 (nn.ci)](https://alist.nn.ci/zh/config/other.html) |

[侧边栏设置-离线先下载和本地设置 | AList文档 (nn.ci)](https://alist.nn.ci/zh/config/side.html) | [Alist添加存储 | AList文档 (nn.ci)](https://alist.nn.ci/zh/guide/drivers/common.html) |

### Filebrowser

简介：Filebrowser 是一个使用go语言编写的跨平台的文件管理工具，可以在浏览器上直接访问和管理本地或远程硬盘，修改文件，或者是添加删除文件，甚至可以分享文件，支持多种文件格式和在线播放。详见：[Filebrowser官网](https://www.filebrowser.cn/)。

![预览](https://user-images.githubusercontent.com/5447088/50716739-ebd26700-107a-11e9-9817-14230c53efd2.gif)

二进制文件：[linux-386-filebrowser.tar.gz](https://github.com/filebrowser/filebrowser/releases/download/v2.31.2/linux-386-filebrowser.tar.gz) | [Releases · filebrowser](https://github.com/filebrowser/filebrowser/releases) | [filebrowser-Github](https://github.com/filebrowser/filebrowser) 

1、安装主程序

(1) 脚本一键安装：

>```
>curl -fsSL https://gh.llkk.cc/https://raw.githubusercontent.com/filebrowser/get/master/get.sh | sudo bash
>```

(2) 手动安装

> 用户目录下载程序文件
>
> ```
> cd ~
> 
> wget https://gh.llkk.cc/https://github.com/filebrowser/filebrowser/releases/download/v2.31.2/linux-386-filebrowser.tar.gz
> ```

> 解压文件到"filebrowser_home"
>
> ```
> mkdir -p ~/software/filebrowser_home
> 
> tar -zxvf linux-386-filebrowser.tar.gz -C ~/software/filebrowser_home
> ```

> 添加软连接到"~/.local/bin"
>
> ```
> ln -s /home/test/software/filebrowser_home/filebrowser /home/test/.local/bin/
> ```

2、配置数据库

> Tips：以下内容，两种安装方法通用

(1) 创建配置文件和数据库的存放目录

```
mkdir -p ~/software/filebrowser_home/filebrowser_data
```

(2) 创建并初始化数据库文件

```
filebrowser -d ~/software/filebrowser_home/filebrowser_data/filebrowser.db config init
```

(3) 配置数据库内容

> 设置 监听地址、监听端口、用户的根目录、日志文件位置、默认显示语言、
>
> ```
> filebrowser -d ~/software/filebrowser_home/filebrowser_data/filebrowser.db config set --address 0.0.0.0 --port 8088 --root /home/test --log /var/log/filebrowser.log --locale zh-cn
> ```

>添加新用户和密码
>
>参数"--perm.admin"表示设置为管理员账户；"root" "password" 分别为需要设置的新用户名和密码。
>
>```
>filebrowser -d ~/software/filebrowser_home/filebrowser_data/filebrowser.db users add "root" "password" --perm.admin
>```

>其他命令：打印数据库配置信息，用于检查数据库配置。
>
>```
>filebrowser -d ~/software/filebrowser_home/filebrowser_data/filebrowser.db config cat
>```

3、创建systemd服务

(1) 编辑systemd文件，并填写代码块中的内容

```
sudo nano /etc/systemd/system/filebrowser@test.service
```

```
[Unit]
Description=File browser
After=network.target

[Service]
User=%i
Restart=always
RestartSec=10
ExecStart=/usr/local/bin/filebrowser -d /home/%i/software/filebrowser_home/filebrowser_data/filebrowser.db
# 手动安装使用下方命令：
# ExecStart=/home/%i/.local/bin/filebrowser -d /home/%i/software/filebrowser_home/filebrowser_data/filebrowser.db

[Install]
WantedBy=multi-user.target
```

(2) 使配置生效，并启动服务

```
sudo systemctl daemon-reload
sudo systemctl start filebrowser@test.service
sudo systemctl enable filebrowser@test.service
```

4、网页端登陆地址：http://<ip>:8088

> 默认端口：8080
> 默认管理员账号/密码：admin

帮助文档：

[File Browser官方文档](https://filebrowser.org/installation) | [File Browser 安装及使用](https://www.cnblogs.com/webenh/p/13334303.html) | [FileBrowser 私人网盘安装配置教程](https://oooutman.github.io/FileBrowser/) | 

[Linux安装FileBrowser(简洁版)](https://blog.csdn.net/tongxin_tongmeng/article/details/132495353) | [最全面详细的 filebrowser 搭建部署教程](https://blog.csdn.net/qq_41133428/article/details/127456641) 

### kodbox / 可道云

简介：可道云是一款支持私有化部署的企业网盘，具备网络文件管理器的功能，提供Windows般的在线文件管理体验，支持多格式在线预览、编辑和分享，具有数据安全和企业管理功能。它也是一个网页代码编辑器，允许您直接在网页浏览器中开发网站。详见：[可道云·官网](https://kodcloud.com/download/) 

![img](https://raw.githubusercontent.com/kalcaddle/static/master/images/kodbox/desktop-2.png)

程序包：[kodbox.1.53.zip](https://static.kodcloud.com/update/download/kodbox.1.53.zip) | [下载 · 可道云](https://kodcloud.com/download/) | [Kodbox · Github](https://github.com/kalcaddle/kodbox?tab=readme-ov-file) 

> [!TIP]
>
> 1、安装可道云的前提是服务器具备 LNMP或LAMP环境及相应的php扩展程序；
>
> 2、OMV 7 的网页根目录：/var/www/
>
> 3、Nginx 安装目录：/etc/nginx

1、安装主程序

(1) 用户目录瞎咋程序包

```
cd ~

wget "https://static.kodcloud.com/update/download/kodbox.1.53.zip"
```

(2) 解压到/var/www/

```
sudo unzip kodbox.1.53.zip -d /var/www/kodbox
```

(3) 更改用户和组为www-data，赋予777权限

```
sudo chown -R www-data:www-data /var/www/kodbox

sudo chmod 777 /var/www/kodbox
sudo chmod 777 /var/www/kodbox/config/setting.php
```

2、配置Nginx文件

(1) 编辑"kodbox.conf"，填写代码块中的内容

```
sudo nano /etc/nginx/sites-available/kodbox.conf
```

```
# kodbox.conf

server {
# ipv4 和 ipv6 网页访问端口（port）
listen 8382;
listen [::]:8382;
# 自定义域名，若无域名则使用"localhost"或"_" 
server_name _;

# 设置网页根目录
root /var/www/kodbox;
        index  index.html index.htm index.php;

        location @rewrite {
                rewrite ^/(.*)$ /index.php?q=$1;
        }

        location / {
                try_files $uri $uri/ @rewrite;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
        }

        location ~* \.php$ {
                fastcgi_pass unix:/run/php/php8.2-fpm.sock;
                #fastcgi_pass  127.0.0.1:9001;
                include /etc/nginx/fastcgi_params;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/kodbox.conf /etc/nginx/sites-enabled/
```

(3) 加载Nginx配置

```
sudo nginx -t
sudo nginx -s reload
```

3、网页端配置

(1) 进入安装导航页

```
http://<ip>:port

例：http://192.168.1.54:8382
```

(2) 确认扩展程序都已安装

![image-20241025101917754](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410251019201.png)

(3) 配置数据库

> 最简单的组合是使用"SQLite + 文件缓存"组合，其次是"MySQL + 文件缓存"，二择一即可。
>
> 注意："MySQL + 文件缓存"中的用户名和密码必须是MySQL中已存在的，否则会报错，也可以直接填写root用户。

![image-20241025102133582](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410251021057.png)

![202410251022584](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410251029004.png)

(4) 最后，设置WebUI管理员用户和密码

![image-20241025102336517](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410251023951.png)

4、转移用户数据目录

&nbsp;&nbsp;&nbsp;&nbsp;若采用的是系统盘和数据盘分离的方式安装的系统，系统盘容量又比较小，可以通过软连接将可道云的数据目录转移到其他的硬盘上，既方便管理又有减少系统盘压力。

(1) 可道云目录结构

```
[kod]
 ├─ app/               //kod程序目录
 │  ├── api/           //对外API接口目录
 │  ├── controller/    //控制器目录
 │  ├── core/          //核心类文件
 │  ├── function/      //通用函数库
 │  ├── kod/           //kod 常用类库
 │  ├── model/         //model 目录
 │  ├── sdks/          //第三方sdk
 │  └── template/      //模板目录 
 ├── config/           //配置文件入口
 ├── data/             //数据目录
 ├── plugins/          //插件目录
 ├── static/           //静态资源目录
 └── index.php         //全局入口文件
## 多语言
## 数据层
## 配置数据读写
```

(2) 从结构可知，只需要将"data/"目录转移到其他硬盘即可

```
# 在OMV7中挂在新硬盘，使用变量"DIR500G"标记路径
DIR500G=/srv/dev-disk-by-uuid-5c59f80f-c412-4953-85ed-53839444bcce/500G
# 在新硬盘根目录下创建一个"new-data/"目录
mkdir $DIR500G/new-data
# 赋予777权限
chmod 777 $DIR500G/new-data
# 复制"data/"到"new-data"
cp -r /var/www/kodbox/data $DIR500G/new-data/kodbox-data
# 更改拥有者和
sudo chown -R www-data:www-data $DIR500G/new-data/kodbox-data
# 重命名"data/"为"old-data/"
sudo mv /var/www/kodbox/data/ /var/www/kodbox/old-data
# 将"kodbox-data/"目录软连接到"kodbox"目录下
ln -s /$DIR500G/new-data/kodbox-data/ /var/www/kodbox/data
# 更改拥有者及所属用户组
sudo chown -h www-data:www-data /var/www/kodbox/data
```

参考文档：

[Nginx服务配置篇：NextCloud部署安装](https://cloud.tencent.com/developer/article/2122700) | [Nginx+kodexplorer(可道云部署纪要)](https://developer.aliyun.com/article/694172) | [可道云目录结构](https://blog.csdn.net/jking2018/article/details/84650769) | 

[Linux权限详解](https://cloud.tencent.com/developer/article/2069886) | 

### Rclone

简介：Rclone 是一个命令行程序，用于管理云存储上的文件，支持多种云存储和文件系统间的同步、备份、迁移，包括S3、Dropbox等。有强大的云等效项，相当于 unix 命令 rsync、cp、 mv、mount、ls、ncdu、tree、rm 和 cat。它的语法 包括 shell 管道支持和保护，可在命令行、脚本中或通过其 API 使用。Rclone能够挂载任何本地、云或 虚拟文件系统作为磁盘， 并通过 SFTP、HTTP、WebDAV、FTP 和 DLNA 提供这些服务，在 Linux、Windows 和 Mac 上广泛使用。详看：[Rclone·官网](https://rclone.org/)。

![Rclone 标志](https://rclone.org/img/logo_on_light__horizontal_color.svg)

程序文件：[rclone-v1.68.1-linux-386.zip](https://downloads.rclone.org/v1.68.1/rclone-v1.68.1-linux-386.zip) |[Rclone 下载](https://rclone.org/downloads/) 

一键安装脚本

```
sudo -v ; curl https://rclone.org/install.sh | sudo bash
```

帮助文档：

[安装 · Rclone](https://rclone.org/install/) | [手册 · Rclone](https://rclone.org/docs/) 

### quark-auto-save

简介：夸克网盘签到、自动转存、命名整理、发推送提醒和刷新媒体库一条龙。对于一些持续更新的资源，隔段时间去转存十分麻烦，定期执行本脚本自动转存、文件名整理，配合 Alist, rclone, Emby 可达到自动追更的效果。通过aria2的api，可以时间转存同时自动下载。详见：[Cp0204/quark-auto-save · GitHub](https://github.com/Cp0204/quark-auto-save) 

![；](https://github.com/Cp0204/quark-auto-save/raw/main/img/screenshot_webui-1.png)

程序包：[Source code-v0.3.9.5(tar.gz)](https://github.com/Cp0204/quark-auto-save/archive/refs/tags/v0.3.9.5.tar.gz) | [Releases](https://github.com/Cp0204/quark-auto-save/releases) 

1、安装主程序

(1) 用户目录下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/Cp0204/quark-auto-save/archive/refs/tags/v0.3.9.5.tar.gz -O quark-auto-save.tar.gz
```

(2) 解压至"software_home"目录

```
mkdir ~/software_home/quark_home

tar zxf quark-auto-save.tar.gz -C ~/software_home/quark_home
```

2、运行程序

(1) 创建python虚拟环境

```
python3 -m venv ~/software_home/quark_home
```

(2) 激活环境 

```
source ~/software_home/quark_home/bin/activate
```

(3) 安装依赖

```
pip3 install -r ~/software_home/quark_home/quark-auto-save-0.3.9.5/requirements.txt
```

(4) 运行程序

```
cd ~/software_home/quark_home/quark-auto-save-0.3.9.5

python3 ./app/run.py
```

3、创建systemd自启动服务

(1) 编辑 "quark-auto-save@<test>.service"，将"\<name\>"改为真实用户名，如 test；用于程序运行。

```
sudo nano /etc/systemd/system/quark-auto-save@test.service
```

```
[Unit]
Description=quark-auto-save
After=network.target

[Service]
Type=simple
User=%i
WorkingDirectory=/home/%i/software_home/quark_home/quark-auto-save-0.3.9.5
ExecStart=/home/%i/software_home/quark_home/bin/python3 /home/%i/software_home/quark_home/quark-auto-save-0.3.9.5/app/run.py
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start quark-auto-save@test.service
sudo systemctl enable quark-auto-save@test.service
sudo systemctl status quark-auto-save@test.service
```

帮助文档：[夸克网盘自动转存·GitHub](https://github.com/Cp0204/quark-auto-save?tab=readme-ov-file#夸克网盘自动转存) | [quark-auto-save · Wiki](https://github.com/Cp0204/quark-auto-save/wiki/使用技巧集锦) 

## 文档：

### Libreoffice

简介：LibreOffice 是一款功能强大的办公软件，默认使用开放文档格式 (OpenDocument Format , ODF), 并支持 *.docx, *.xlsx, *.pptx 等其他格式。它包含了 Writer, Calc, Impress, Draw, Base 以及 Math 等组件，可用于处理文本文档、电子表格、演示文稿、绘图以及公式编辑。它可以运行于 Windows, GNU/Linux 以及 macOS 等操作系统上，并具有一致的用户体验。详见：[LibreOffice · 官网](https://www.libreoffice.org/)。

![33cd3887-8ad4-4949-a7d1-72cb69a32484](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410292053916.png)

> [!NOTE]
>
> LibreOffice 支持的32位系统最后的版本是6.28.2。
>
> 在服务器上一般直接使用使用LibreOffice，而是通过其他的软件进行调用，然后再网页端进行文档文件的预览，譬如后文提到的kkFileView。如果你刚好也要安装kkFileView，请直接使用后文提供的一键安装脚本，它可以将LO和kk一起安装到你的机器上。

旧存档页：[Libreoffice · 旧存档（全）](https://downloadarchive.documentfoundation.org/libreoffice/old/)  

程序包：[LibreOffice_6.2.8.2_Linux_x86_deb_helppack_zh-CN.tar.gz](https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb_helppack_zh-CN.tar.gz) | 帮助文档包

​		[LibreOffice_6.2.8.2_Linux_x86_deb_langpack_zh-CN.tar.gz](https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb_langpack_zh-CN.tar.gz) | 中文语言包

​		[LibreOffice_6.2.8.2_Linux_x86_deb.tar.gz](https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb.tar.gz) | 主题程序

​		[Fonts.zip](https://kkfileview.keking.cn/fonts.zip) | 中文字体包

1、安装主程序

(1) 用户目录下载LibreOffice程序包

```
# 进入用户目录
cd ~

# 帮助包
wget https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb_helppack_zh-CN.tar.gz -O helppack.tar.gz

# 中文语言包
wget https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb_langpack_zh-CN.tar.gz -O langpack.tar.gz

# 主程序
wget https://downloadarchive.documentfoundation.org/libreoffice/old/6.2.8.2/deb/x86/LibreOffice_6.2.8.2_Linux_x86_deb.tar.gz -O libreOffice.tar.gz
```

(2) 解压文件

```
tar -xzf libreOffice.tar.gz && tar -xzf helppack.tar.gz && tar -xzf langpack.tar.gz
```

(3) 按顺序安装deb包

```
sudo dpkg -i ~/LibreOffice_6.2.8.2_Linux_x86_deb/DEBS/*
sudo dpkg -i ~/LibreOffice_6.2.8.2_Linux_x86_deb_langpack_zh-CN/DEBS/*
sudo dpkg -i ~/LibreOffice_6.2.8.2_Linux_x86_deb_helppack_zh-CN/DEBS/*
```

2、安装中文字体

(1) 用户目录下载字体

```
wget https://kkfileview.keking.cn/fonts.zip
```

(2) 解压文件到字体库

```
sudo unzip -J fonts.zip -d /usr/share/fonts 
```

(3) 更新字体缓存

```
fc-cache -f -v
```

帮助文档：[LibreOffice · 简中用户文档](https://documentation.libreoffice.org/zh-cn/cn/) | 

### kkFileView

简介：kkFileView为文件文档在线预览解决方案，该项目使用流行的spring boot搭建，易上手和部署，能的文件预览开源项目，基本支持主流办公文档的在线预览，如doc,docx,xls,xlsx,ppt,pptx,pdf,txt,zip,rar,图片,视频,音频等等。详见：[kkFileView · 官网](https://kkfileview.keking.cn/zh-cn/index.html)。

![image-20241029211735276](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410292117105.png)

> [!NOTE]
>
> 环境要求：
>
> - Java: 1.8+；
> - 安装LibreOffice或OpenOffice；

程序包：[【i386专用版】 - 提取码：rs7l ](https://caiyun.139.com/m/i?2i2MoHad24Afz)  |  [【其他】· 提取码：j0e2](https://caiyun.139.com/m/i?2i2MoSaTKrdgn)  

#### 一键部署(含office)

1、首先，将下载的i386专用版 kkFileView ，上传至用户目录；

2、解压文件至目录 "software_home"

```
tar zxf new-kkFileView-4.0.0_i386.tar.gz ~/software_home/
```

3、执行安装脚本

```
~/software_home/kkFileView-4.0.0/install-all.sh
```

4、启动/停止程序

```
~/software_home/kkFileView-4.0.0/bin/start_and_stop.sh
```

5、设置脚本

```
~/software_home/kkFileView-4.0.0/bin/settings.sh
```

#### **手动安装 kkFileView**

1、安装主程序

(1) 下载 kkFileView 程序包，上传至用户目录；

>  通过云盘下载 "kkFileView-4.4.0-beta_linx.tar.gz"文件。

(2) 解压至"software_home"目录；

```
# 创建程序目录"kkFileView"
mkdir -p ~/software_home/kkFileView

# 解压
tar --strip-components=1 -xzf ~/kkFileView-4.4.0-beta_linx.tar.gz -C ~/software_home/kkFileView
```

(3) 修改 "Office Home"路径

> 通过 "ctrl + w"组合键，检索 "KK_OFFICE_HOME" ,定位 "office.home"。

```
nano ~/software_home/kkFileView/config/application.properties
```

```
# 修改为下方的新内容
office.home = ${KK_OFFICE_HOME:/opt/libreoffice6.2}
```

(4) 安装组件

```
sudo apt-get install -y libsm6
```

2、配置 systemd 服务

(1) 编辑 "kkFileView@\<name\>.service"，将"\<name\>"改为真实用户名，如 test；

```
sudo nano /etc/systemd/system/kkFileView@test.service
```

```
[Unit]
Description=kkFileView Service

[Service]
User=%i
ExecStart='nohup java -Dfile.encoding=UTF-8 -Dspring.config.location="/home/%i/software_home/kkFileView/config/application.properties" -jar /home/%i/software_home/kkFileView/bin/kkFileView-4.4.0-beta.jar > "/home/%i/software_home/kkFileView/log/kkFileView.log" 2>&1 &'
ExecStop=kill -15 `ps -ef|grep kkFileView|awk 'NR==1{print $2}'`
WorkingDirectory="/home/%i/software_home/kkFileView"
KillMode=process
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
```

(2) 重载配置

```
sudo systemctl daemon-reload
sudo systemctl start kkFileView@test.service
sudo systemctl status kkFileView@test.service
sudo systemctl enable kkFileView@test.service
```

3、网页预览地址

> 默认端口：8012；更改需要对配置文件"application.properties"进行修改。

```
http://<ip>:8012
例：http://192.168.1.54:8012
```

帮助文档：[kkFileView · 部署](https://kkfileview.keking.cn/zh-cn/docs/production.html) | [kkFileView · gitee](https://gitee.com/kbob/kkFileView) | [kkFileView · GitHub](https://github.com/kekingcn/kkFileView) 



## 阅读：

### Calibre-web

简介：Calibre-Web 是calibre的web版，它提供了用户友好的对外网页展示的形式，可以在网页上展示、管理、浏览自己的书籍，提供了比原版更干净直观的界面，用于使用有效的Calibre数据库浏览、阅读和下载电子书。配合原版的组件，还可以实现网页端实时转换电子书格式。详见：[Calibre-web · Github](https://github.com/janeczku/calibre-web)。

![calibreweb](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410260452050.png)

> [!NOTE]
>
> 1.需要提前部署好 Python 和 Rust 环境、安装好 Pipx 管理器或 Python 虚拟环境(venv)；
>
> 2.安装顺序：Python3、pip3、python3-venv、pipx、rust环境、pkg-config、libssl-dev；calibreweb。

程序包：[CalibreWeb · PyPI](https://pypi.org/project/calibreweb/) 

1、安装必要软件包

> 安装前建议重启终端窗口

```
# 更新本地可用软件列表
sudo apt update
# 必要软件包
sudo apt install -y pkg-config
sudo apt install -y libssl-dev
```

> Tips：缺少必要软件包的报错信息
>
> ```
> # 缺少"pkg-config"
> “you need to install a pkg-config package for your OS”
> 
> # 缺少"libssl-dev"
> “Could not find directory of OpenSSL installation”
> ```

2、安装主程序

(1) 使用pipx安装CalibreWeb

> 成功安装后，程序位于"~/.local/pipx/venvs/calibreweb"，自动创建指向"~/.local/bin"链接，名为"cps"

```
# 安装
pipx install calibreweb

# 启动程序
cps
```

(2) 使用python虚拟环境安装CalibreWeb

> 当pipx安装CalibreWeb不成功时尝试，可以看到具体的报错内容。

```
# 为calibre-web创建虚拟文件存储目录
python3 -m venv /home/test/software_home/calibreWeb_home
# 激活虚拟环境
source /home/test/software_home/calibreWeb_home/bin/activate
# 安装calibreweb
pip3 install --upgrade pip	# 升级pip3到最新版本
pip3 install calibreweb
# 推出虚拟环境
deactivate
# 创建软连接到指向"~/.local/bin",方便启动程序。
ln -s /home/test/software_home/calibreWeb_home/bin/cps /home/test/.local/bin/
# 启动程序
cps
```

(3) 关于安装中的报错信息及处理方法

```
（一）"Running setup.py install for iso-639 did not run successfully."
 <1> 清理 pip 缓存：rm -rf ~/.cache/pip
 <2> 更新 pip 和 setuptools：pip install --upgrade pip setuptools wheel
 <3> 单独安装 iso-639：pip install iso-639
 <4> 重新安装calibreweb

（二）"Building wheel for netifaces (pyproject.toml) ... error"
	需要重新安装netifaces库：pip3 install netifaces
```

3、添加systemd自启动服务

(1) 编辑calibre-Web@\<name\>.service，将"\<name\>"改为真实用户名，如 test；

```
sudo nano /etc/systemd/system/calibre-Web@test.service
```

```
[Unit]
Description=Calibre-Web

[Service]
User=%i
Type=simple
ExecStart=/home/%i/.local/bin/cps

[Install]
WantedBy=multi-user.target
```

(2) 使配置生生效

```
sudo systemctl daemon-reload
sudo systemctl start calibre-Web.service
sudo systemctl status calibre-Web.service
sudo systemctl enable calibre-Web.service
```

4、网页端登陆地址

```
http://localhost:8083 或
http://localhost:8083/opds

# 默认管理员：admin
	  密 码：admin123
```

> [!IMPORTANT]
>
> 首次使用CalibreWeb需要指定"metadata.db"(数据库)的位置，没有"metadata.db"可以下载[空白.db](https://github.com/janeczku/calibre-web/raw/master/library/metadata.db)，放到书库目录"books"中，或者安装Calibre桌面端创建一个新数据库。可以将Nas的书库目录"books"映射为网络共相目录，添加到Calibre所在计算机的本地磁盘，好处是便于管理和刮削。

帮助文档：

[Calibre-web ·PyPI](https://pypi.org/project/calibreweb/) | [Calibre-Web 的基本使用方法](https://blog.mokeedev.com/2022/06/1124/) | [Pip3安装calibre-web ·PyPI](#quick-start) | [Calibre-web官方文档（GitHub）](https://github.com/janeczku/calibre-web?tab=readme-ov-file) | [systemd 启动 Calibre-Web](https://github.com/janeczku/calibre-web/wiki/Setup-Service-on-Linux) | [在 Linux Mint 19 或 20 中安装 Calibre Web ](https://github.com/janeczku/calibre-web/wiki/How-To:-Install-Calibre-Web-in-Linux-Mint-19-or-20) | [如何用 Calibre 统一管理书籍](https://utgd.net/article/20253) | [通过calibre-web打造个人在线书城](https://blog.csdn.net/qq_39366927/article/details/123013413) | [calibre-web 转换格式配置](https://www.lategege.com/?p=643) 

### Calibre

简介：calibre是一个自由开源的功能强大且易于使用的电子书管理器，可以用来组织、存放、以及管理电子书，支持大多数的电子书格式。同时也支持与许多流行的电子书阅读器进行同步，并可能在DRM的限制下转换电子书的格式。详看：[calibre · 官网](https://calibre-ebook.com/zh_CN/about)。

![e9270c2c-06cb-4830-a099-ef537821ad00](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410292244849.png)

> [!NOTE]
>
> 原版Calibre以桌面UI为主，附带命令行和简陋的webui；对于没有安装桌面环境的服务器，通常无法使用它的GUI，这里主要是利用它的命令行转换电子书功能，为Calibre-web网页转换格式提供调用组件，如有条件，还是建议使用桌面版来管理书籍。
>
> 二进制最后版本v5.44.0；Debian仓库安装版本v6.3

程序包：[Linux Intel 32-bit binary](https://download.calibre-ebook.com/5.44.0/calibre-5.44.0-i686.txz) | [calibre - 下载Linux版](https://calibre-ebook.com/zh_CN/download_linux) | 

1、安装主程序

(1) 使用二进制程序包安装

> 下载程便携序包
>
> ```
> wget https://download.calibre-ebook.com/5.44.0/calibre-5.44.0-i686.txz
> ```
>
> 解压程序包
>
> ```
> mkdir -p ~/software_home/calibre
> 
> # 解压至"calibre"
> tar Jxf calibre-5.44.0-i686.txz -C ~/software_home/calibre
> ```
>
> 图书格式转换命令："ebook-convert"
>
> ```
> ~/software_home/calibre/bin/ebook-convert
> ```

(2) 使用Debian仓库安装

> ```
> sudo apt update
> sudo apt install -y calibre
> ```
>
> 转换命令：
>
> ```
> /usr/bin/ebook-convert
> ```

(3) 命令释义及其使用方式

> 图书格式转换命令；input_file 表示输入文件，output_file 表示输出文件。
>
> ```
> ebook-convert input_file output_file [options]
> ```
>
> 详见：["ebook-convert"命令 ](https://manual.calibre-ebook.com/zh_CN/generated/zh_CN/ebook-convert.html) | [电子书转换](https://manual.calibre-ebook.com/zh_CN/conversion.html#conversion) 

2、为**"calibre-web"**网页端添加转换器

(1) 网页登录管理员账户；

(2) 右上角进入"管理权限"  -->  "编辑基本配置"  -->  "扩展程序配置"  --->  点击 选择二进制文件路径

> **calibre**：  "Path to Calibre Binaries"   --->  " /home/test/software_home/calibre "
>
> **KEpubify**：  "KEpubify 电子书转换器路径"   --->   " /usr/bin/kepubify "  （具体安装看后文）
>
> ![image-20241030144953265](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410301449065.png)
>

(3) 网页端转换图书格式：

> 网页端"登陆管理员账户"后，选中需要转换的书籍，进入"编辑元数据"页，从左侧进行"书籍格式转换"。
>
> ![image-20241030143907433](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410301439238.png)

帮助文档：[calibre - 帮助](https://calibre-ebook.com/zh_CN/help) |[calibre - 用户手册](https://manual.calibre-ebook.com/zh_CN/) | [calibre · 命令行界面](https://manual.calibre-ebook.com/zh_CN/generated/zh_CN/cli-index.html#id2) | 

### Kepubify

简介：Kepubify 是将 EPUB 转换为 Kobo 增强型 KEPUB 格式以便在 Kobo 电子阅读器上使用的最快工具。

它可以处理格式错误的电子书，不会对书籍的布局进行过多的修改，不依赖任何外部软件，并且可以通过命令行运行。详见：[Kepubify · 官网](https://pgaskin.net/kepubify/)。

> [!NOTE]
>
> 更多人可能还是使用手机、平板看电子书，至少本人如此，所以这个格式或许是可有可无的。

下载页： [Download · Kepubify](https://pgaskin.net/kepubify/dl/) | [Releases · Kepubify](https://github.com/pgaskin/kepubify/releases) | [GitHub · kepubify](https://github.com/pgaskin/kepubify)  | [Kepubify 转格式网页版](https://pgaskin.net/kepubify/try/) 

二进制程序：[kepubify-linux-32bit](https://github.com/pgaskin/kepubify/releases/download/v4.0.4/kepubify-linux-32bit)  | 将 EPUB 转换为 Kobo EPUB;

​			[covergen-linux-32bit](https://github.com/pgaskin/kepubify/releases/download/v4.0.4/covergen-linux-32bit) | 重新生成 Kobo 设备上的封面缩略图;

安装程序

1、下载二进制文件

```
# 创建程序目录
mkdir -p ~/software_home/kepubify

# 下载程序包
wget https://github.moeyy.xyz/https://github.com/pgaskin/kepubify/releases/download/v4.0.4/kepubify-linux-32bit -P ~/software_home/kepubify
```

2、赋权并创建软连接

```
sudo chmod 755 ~/software_home/kepubify/kepubify-linux-32bit

sudo ln -s /home/test/software_home/kepubify/kepubify-linux-32bit /usr/bin/kepubify
```

3、验证安装

```
kepubify --version
```

帮助文档：[命令使用方法 · Kepubify](https://pgaskin.net/kepubify/docs/) | 

### 阅读3

简介：阅读是一款提供网络文学搜索的工具，为广大网络文学爱好者提供一种方便、快捷舒适的试读体验。阅读3 网页版带，提供了2种方式的API：`Web方式`和`Content Provider方式`，不需要手机。接口从 lightink-server 修改而来，网页从 阅读3.0 Web 端 修改而来。可以导入本地书籍，支持epub，支持RSS订阅、WebDav同步等功能，详见：[阅读3服务器版 · Github](https://github.com/hectorqin/reader)。

![img](https://github.com/hectorqin/reader/raw/master/imgs/4.jpg)

> [!IMPORTANT]
>
> 安装要求：需要完整的Java运行环境，Java-jdk 版本 ≥ 8 ；只安装了 Java-jre 无法运行。

二进制文件：[reader-server-3.2.10.zip](https://github.com/hectorqin/reader/releases/download/v3.2.10/reader-server-3.2.10.zip) | [Releases · Reader](https://github.com/hectorqin/reader/releases) 

1、安装主程序

(1) 用户目录下载 "阅读3" 服务器版

```
cd ~

# 下载最新的阅读v3.2.10
wget https://github.moeyy.xyz/https://github.com/hectorqin/reader/releases/download/v3.2.10/reader-server-3.2.10.zip
```

(2) 解压至"reader-server_home"

```
# 创建目录 "reader-server_home"
mkdir -p ~/software_home/reader-server_home

# 解压"reader-server"
unzip reader-server-3.2.10.zip -d ~/software_home/reader-server_home
```

(3) 编辑"startup.sh"启动脚本

> 在reader-server的 v3.2.7 ~ v3.2.10 版本都有 startup.sh 脚本启动不了的情况；解决方法是修改 "start.sh" 脚本的错误代码，"ctrl + w" 检索定位 "grep -EO"

```
nano ~/software_home/reader-server_home/bin/startup.sh
```

```
# 定位下方内容，并修改"grep -EO"为"grep -Eo"
NEWEST_JAR=$(ls $BASE_DIR/target | grep -EO 'reader.*\.jar' | sort -nr | head -1)

# 修改后
NEWEST_JAR=$(ls $BASE_DIR/target | grep -Eo 'reader.*\.jar' | sort -nr | head -1)
```

2、运行 reader-server

(1) 脚本运行程序

> 注意：startup 脚本在单用户模式下 默认占用 256m 内存，在多用户模式下 默认占用 1g 内存，如果内存不够，请自行修改脚本

```
~/software_home/reader-server_home/bin/startup.sh
```

(2) 直接运行程序

```
java -jar ~/software_home/reader-server_home/target/reader-pro-$version.jar
```

> 参数说明
>
> ```
> # startup 脚本支持以下选项，这些选项如果使用命令行参数修改，则会覆盖配置文件的设置
> "-m single|multi" 选择单用户/多用户模式，默认 以配置文件 conf/application.properties 为准
> "-s reader-xx"  选择 jar 文件名(不含.jar后缀)，默认使用target目录里最新的jar
> "-i inviteCode" 设置多用户模式下的邀请码，默认 以配置文件 conf/application.properties 为准
> "-k secureKey"  设置多用户模式下的管理密码，默认 以配置文件 conf/application.properties 为准
> 
> # 接口服务使用文件存储书源及目录等信息，存储位置为 storage 目录；可通过运行时添加 -Dreader.app.storagePath=/path/to/storage 来改变。
> 
> # 本地书仓-在 storage/localStore 中可以集中存放管理本地书籍，开启访问权限的用户可以在 页面-浏览书仓 中选择批量导入到自己的书架进行阅读。
> ```

3、网页端访问地址

> 首次登陆可注册管理员账户
> 默认用户名/密码： default / 123456
>
> ```
> http://<ip>:8080/
> 例：http://192.168.1.54:8080/
> # 接口地址 
> http://<ip>:8080/reader3/
> ```

帮助文档： [Reader · Doc - Github](https://github.com/hectorqin/reader/blob/master/doc.md) 

## 漫画：

### LANraragi

简介：LANraragi （简称：LRR）是一款免费和开源的漫画/漫画媒体服务器，以存档格式存储漫画，直接从网络浏览器读取档案（服务器使用临时文件夹从压缩文件中读取），支持zip/rar/targz/lzma/7z/xz/cbz/cbr/pdf和epup格式。插件和标签功能对存档和阅读漫画/同人杂志相当友好。关于 · [LANraragi](https://github.com/Difegue/LANraragi)。

![d54a96ce-f897-4314-8dc8-aab28f38c0d7](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011242518.png)

源码包：[LANraragi 原版](https://github.com/Difegue/LANraragi/archive/refs/tags/v.0.9.21.tar.gz) | [Releases · 原版](https://github.com/Difegue/LANraragi/releases) | [LANraragi 汉化版](https://github.com/uparrows/LANraragi_cn/archive/refs/tags/0.8.7.tar.gz) | [Releases · 汉化版](https://github.com/uparrows/LANraragi_cn/releases) 

> [!NOTE]
>
> LANraragi原版是纯英文版本，还在持续更新；汉化版目前定格在v0.8.7，初期使用更方便。
>
> 本节采用源码包编译安装，需要提前安装号 Nodejs和npm ，安装方法看上一章 "开发环境的部署" ；docker版本看下一章"Docker及可用镜像部署"。

1、安装主程序

(1) 用户目录下载 源码包

> 原版和汉化版二选一

```
cd ~

# 原版
wget https://github.moeyy.xyz/https://github.com/Difegue/LANraragi/archive/refs/tags/v.0.9.21.tar.gz -O LANraragi.tar.gz
# 汉化版
wget https://github.moeyy.xyz/https://github.com/uparrows/LANraragi_cn/archive/refs/tags/0.8.7.tar.gz -O LANraragi.tar.gz
```

(2) 解压 源码包

```
# 创建程序目录
mkdir -p ~/software_home/lanraragi
# 解压
tar --strip-components=1 -xzf LANraragi.tar.gz -C ~/software_home/lanraragi
```

2、编译安装

(1) 安装必要依赖

```
# 更新升级本地可用程序
sudo apt-get update && sudo apt-get upgrade -y
# 安装依赖
sudo apt-get install build-essential make gnupg pkg-config \
cpanminus redis-server libarchive-dev imagemagick webp libssl-dev zlib1g-dev libjxl-dev \
perlmagick ghostscript npm
```

(2) 编译并安装主程序

```
# 进入程序目录"lanraragi"
cd ~/software_home/lanraragi

# 开始编译
sudo npm run lanraragi-installer install-full
```

(3) 启动测试

```
npm start
```

(4) 测试网页访问

> 默认端口：3000；之后根据systemd服务设置的端口访问。

```
http://<ip>:port
例：http://192.168.1.54:3000
```

3、配置systemd服务

(1) 编辑 "lanraragi-systemd.service"文件

> 替换 [Service] 下，对应行的代码

```
nano ~/software_home/lanraragi/tools/lanraragi-systemd.service
```

```
[Service]
User=%i		# 添加一行执行指定用户代码，填"%i"
Environment=LRR_NETWORK=http://*:3001		# 端口自定义，文件默认80，此处设为3001
WorkingDirectory=/home/%i/software_home/lanraragi		# 工作目录设置为安装程序的路径
ExecStart=/usr/bin/perl /home/%i/software_home/lanraragi/script/launcher.pl -f /home/%i/software_home/lanraragi/script/lanraragi	# 修改为真实路径信息
```

(2) 复制文件到 systemd 目录，并更改文件名。

> 格式"lanraragi-systemd@\<name\>.service"，"\<name\>"填写真实用户名，如 ”test“。

```
sudo cp ~/lanraragi/tools/lanraragi-systemd.service /etc/systemd/system/lanraragi@test.service
```

> 重载配置

```
sudo systemctl daemon-reload
sudo systemctl start lanraragi@test.service
sudo systemctl status lanraragi@test.service
sudo systemctl enable lanraragi@test.service
```

帮助文档：[LANraragi · 文档](https://sugoi.gitbook.io/lanraragi/dev) | [Linux安装LANraragi · 文档](https://sugoi.gitbook.io/lanraragi/installing-lanraragi/source) | [Lanraragi 安装及使用教程](https://lolicon.life/archives/lanraragi安装及使用教程附常见问题) | [LRR源码目录结构](https://sugoi.gitbook.io/lanraragi/extending-lanraragi/architecture) 

### Ubooquity

简介：Ubooquity是一款免费、轻量级且易于使用的漫画和电子书家庭服务器，可以在任何安装了 Java 的设备上使用它（几乎所有在 Windows、Linux 或 Mac OS 上运行的设备，包括 NAS）。安装后，它会在后台运行，并通过网页提供您选择共享的所有漫画和书籍，通过平板电脑、电子阅读器、手机或计算机从任何地方访问它们。详见：[主页 · Ubooquity](https://vaemendis.net/ubooquity/)。

![2232812158](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410260536738.jpg)

二进制文件：[Ubooquity-2.1.5.zip · 原版](https://vaemendis.net/ubooquity/downloads/Ubooquity-2.1.5.zip) | [Ubooquity · 汉化版](https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/Ubooquity_zh-cn/Ubooquity.jar) | [Download · Ubooquity](https://vaemendis.net/ubooquity/static2/download) 

1、安装主程序

(1) 用户目录下载程序包

> 原版为英文且持续更新；根据跟人喜好选择原版或者汉化版即可。
>

```
# 进入用户目录
cd ~

# 英文原版_v2.1.5
wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/Ubooquity_en-us/Ubooquity-2.1.5.zip
# 汉化版
wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/Ubooquity_zh-cn/Ubooquity.jar
```

(2) 解压至"Ubooquity_home"目录

```
# 创建"Ubooquity_home"
mkdir -p ~/software_home/Ubooquity_home
# 解压Ubooquity
unzip Ubooquity-2.1.5.zip -d ~/software_home/Ubooquity_home

# 汉化版直接移动至目录内
mv ~/Ubooquity.jar ~/software_home/Ubooquity_home
```

(3) 赋予755权限

```
sudo chmod 755 ~/software_home/Ubooquity_home/Ubooquity.jar
```

2、配置systemd自启动服务

(1) 编辑"ubooquity@\<name\>.service"，将"\<name\>"改为真实用户名，如 test。

```
sudo nano /etc/systemd/system/ubooquity@test.service
```

```
[Unit]
Description=Ubooquity Book Server
After=network.target

[Service]
User=%i
ExecStart=/usr/bin/java $MEM_OPT -jar /home/%i/software_home/Ubooquity_home/Ubooquity.jar --workdir /home/%i/software_home/Ubooquity_home --headless --libraryport 2202 --adminport 2203 --remoteadmin </dev/null &>ubooquity.log
Restart=on-failure
Type=simple

[Install]
WantedBy=multi-user.target
```

(2) 配置生效

```
sudo systemctl daemon-reload
sudo systemctl start ubooquity@test.service
sudo systemctl enable ubooquity@test.service
sudo systemctl status ubooquity@test.service
```

> 启动参数详解，详看：[Ubooquity命令详解](https://vaemendis.github.io/ubooquity-doc/pages/manual.html) 
>
> ```
> "java -jar Ubooquity.jar"：运行 .jar 程序 --remoteadmin
> "$MEM_OPT"：这是一个环境变量，它可能包含了为Java虚拟机（JVM）设置的内存选项。
> "--workdir <dir_path>"：指定工作目录的位置。
> "--headless"：在没有图形环境的设备不显示 Ubooquity 的GUI界面。
> "--libraryport <library port>"：媒体库访问端口，默认2202；
> "--adminport <admin port>"：管理员访问端口，默认2203。
> "--remoteadmin"：允许从远程计算机访问Ubooquity。
> "</dev/null"：特殊的设备文件，丢弃所有写入它的数据。
> "&>ubooquity.log"：错误信息重定向到日志文件。
> ```

3、网页端登陆

> Ubooquity 有两个不同的 WebUI，一个用于访问您的媒体，另一个用于管理您的 Ubooquity 设置。
>
> ```
> # 媒体库地址
> http://<ip>:2202/
> 例：http://192.168.1.54:2202
> 
> # 管理员后台地址
> http://<ip>:2203/admin
> 例：http://192.168.1.54:2203
> ```

4、设置主题

> [黑色主题 - darktheme](https://github.com/adelatour11/darktheme) | [仿Plex - modifiedPlexTheme](https://github.com/nullredirect/modifiedPlexTheme-Ubooquity) 
>
> 推荐的Ubooquity主题只适用于 v2.x 版本，v3.x 无法使用。

(1) 进入用户目录，下载主题文件

```
# 下载 "黑色主题 - darktheme" 
git clone https://github.moeyy.xyz/https://github.com/adelatour11/darktheme.git ~/software_home/Ubooquity_home/themes/darktheme

# 下载 "仿Plex - modifiedPlexTheme"
git clone https://github.moeyy.xyz/https://github.com/nullredirect/modifiedPlexTheme-Ubooquity.git && mv ~/modifiedPlexTheme-Ubooquity/plextheme-master/ ~/software_home/Ubooquity_home/themes/
```

(2) 登陆管理员后台

> ```
> http://<ip>:2203/admin
> 例：http://192.168.1.54:2203/admin
> ```
>
> 一般-->主题-->当前主题--> "darktheme" 或 "plextheme-master" -->保存并重启
>
> ![image-20241026074350493](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410260743216.png)

帮助文档：

[Ubooquity Doc · linuxserver.io](https://docs.linuxserver.io/images/docker-ubooquity/#supported-architectures) | [Ubooquity · 官方手册](https://vaemendis.github.io/ubooquity-doc/) | [Ubooquity汉化 · 原文](https://yuanfangblog.xyz/technology/236.html) | [Ubooquity-Doc · Ultra.cc](https://docs.ultra.cc/books/ubooquity/page/ubooquity) 

### Suwayomi-Server

简介：Suwayomi 是一款免费、开源的跨平台漫画阅读器服务器，支持安装各种图源扩展。它能够完美兼容安卓漫画软件 Tachiyomi 的图源插件，通过插件可以实现漫画在线观看、添加追番、自动更新，堪称 Tachiyomi 电脑版。任何运行 java 和/或具有浏览器的平台都可以运行它，这包括 Windows、Linux、macOS、chrome OS 等。详见：[Suwayomi · Github](https://github.com/Suwayomi/Suwayomi-Server) 

![image-20241026122338240](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410261223208.png)

程序包：[Suwayomi-Server-v1.1.1-r1535.jar](https://github.com/Suwayomi/Suwayomi-Server/releases/download/v1.1.1/Suwayomi-Server-v1.1.1-r1535.jar) | [Releases · Suwayomi](https://github.com/Suwayomi/Suwayomi-Server/releases) 

1、安装程序包

(1) 创建工作目录"suwayomi-Server_home"

```
mkdir -p ~/software_home/suwayomi-Server_home
```

(2) 下载 Suwayomi 程序 java 版

```
wget https://github.moeyy.xyz/https://github.com/Suwayomi/Suwayomi-Server/releases/download/v1.1.1/Suwayomi-Server-v1.1.1-r1535.jar -O ~/software_home/suwayomi-Server_home/Suwayomi-Server.jar
```

(3) 启动命令

> 参数说明："-Dsuwayomi.tachidesk.config.server.rootDir"：指定工作目录路径

```
java -Dsuwayomi.tachidesk.config.server.rootDir="~/software_home/suwayomi-Server_home" -jar ~/software_home/suwayomi-Server_home/Suwayomi-Server.jar
```

2、配置systemd自启动服务

(1) 编辑 "suwayomi@\<name\>.service" ，将\<name\>修改位真实用户名，如 test，用于运行程序。

```
sudo nano /etc/systemd/system/suwayomi@test.service
```

```
[Unit]
Description=Suwayomi Server
After=network.target

[Service]
User=%i
ExecStart=/usr/bin/java -Dsuwayomi.tachidesk.config.server.rootDir="/home/%i/software_home/suwayomi-Server_home" -jar /home/%i/software_home/suwayomi-Server_home/Suwayomi-Server.jar
WorkingDirectory=/home/%i/software_home/suwayomi-Server_home
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
```

(2) 使配置生效

```
sudo systemctl daemon-reload
sudo systemctl start suwayomi@test.service
sudo systemctl enable suwayomi@test.service
sudo systemctl status suwayomi@test.service
```

3、网页端配置

(1) 登陆管理页

> 默认端口：4567；更改端口需要修改配置文件"server.conf"

```
http://<ip>:4567/library
例：http://192.168.1.54:4567/library
```

(2) 安装外部扩展：

> 扩展地址：[Extensions · 列表](https://keiyoushi.github.io/extensions/) | [Extensions · Github](https://github.com/keiyoushi/extensions/tree/repo) 
>

扩展设置1：在线安装插件；

> 侧边栏：设置-->浏览-->扩展库；
>
> 添加源：https://github.moeyy.xyz/https://github.com/keiyoushi/extensions/tree/repo
>
> 侧边栏：浏览-->插件；
>

扩展设置2：本地安装插件；

> 插件下载：[Extensions · 列表](https://keiyoushi.github.io/extensions/) 
>
> 侧边栏：浏览-->插件-->点击 " + " 安装外部插件；
>
> ![image-20241026114428622](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410261144421.png)
>
> 图源：右上角打开"中文"插件。
>
> ![image-20241026122849635](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410261228474.png)

参考： [Suwayomi-Server.jar 帮助文档](https://github.com/Suwayomi/Suwayomi-Server/wiki/Configuring-Tachidesk-Server) 



## 音乐：

### Navidrome

简介：Navidrome 是一个自托管的开源音乐服务器和流媒体软件。它让您可以自由地从任何浏览器或移动设备聆听您的音乐收藏，像使用 Spotify、Apple Music 等服务一样聆听自己的数字音乐。它还允许您轻松与朋友和家人分享您的音乐和播放列表。详见：[关于 Navidrome ](https://www.navidrome.org/about/)。

![img](https://www.navidrome.org/screenshots/light-albums-view.png)

二进制文件：[Navidrome_0.53.3_linux_386.tar.gz](https://github.com/navidrome/navidrome/releases/download/v0.53.3/navidrome_0.53.3_linux_386.tar.gz) | [Releases · Navidrome ](https://github.com/navidrome/navidrome/releases)| [Navidrome · Github](https://github.com/navidrome/navidrome/) 

1、安装主程序

(1) 安装必要组件

```
# 更新本地可用程序列表
sudo apt update
# 安装ffmpeg
sudo apt install ffmpeg -y
```

(2) 用户目录下载程序文件

```
cd ~

wget https://github.moeyy.xyz/https://github.com/navidrome/navidrome/releases/download/v0.53.3/navidrome_0.53.3_linux_386.tar.gz
```

(3) 解压至"navidrome_home"

```
# 创建目录 "navidrome_home"、"config_dir"、"cache"和"music"
mkdir -p ~/software_home/navidrome_home/config_dir ~/software_home/navidrome_home/cache ~/software_home/navidrome_home/music
# 解压至 "navidrome_home"
tar -zxvf navidrome_0.53.3_linux_386.tar.gz -C ~/software_home/navidrome_home
```

(4) 创建配置文件 "navidrome.toml"

```
nano ~/software_home/navidrome_home/config_dir/navidrome.toml
```

```
# 从外部的配置文件加载配置，默认为'./navidrome.toml'；用户"test"改为真实用户名。
ND_CONFIGFILE='/home/test/software_home/navidrome_home/config_dir/navidrome.toml'

# 网页访问端口
PORT='4533'
# 服务器将绑定到的地址；"0.0.0.0 和 :: :（所有 IP）"
ADDRESS='0.0.0.0'

# 在 UI 中启用转码配置,默认 false
ND_ENABLETRANSCODINGCONFIG = 'true'
# 转码缓存的大小；设置为"0"则禁用缓存
TranscodingCacheSize = '150MiB'
# 缓存数据的文件夹（转码、图像等）；
# ND_CACHEFOLDER='path/to/cache'
ND_CACHEFOLDER='/home/test/software_home/navidrome_home/cache'

# 定期自动扫描
ScanSchedule = '@every 24h'
# 存储音乐库的目录，可以是只读的，'path/to/music'修改为真是路径；
# MusicFolder = 'path/to/music'
MusicFolder = '/home/test/software_home/navidrome_home/music'

# 日志文件级别，'error','warn','info','debug','trace'
#LogLevel = 'ERROR'
LogLevel = 'DEBUG'

# 浏览器登陆时的默认语言；
DEFAULTLANGUAGE='zh-Hans'

# 反向代理网址，默认为空
ND_BASEURL = ''

# Spotify 客户端 ID 和 密钥，默认为空；通过 Spotify 集成添加封面，则为必填项。
ND_SPOTIFY_SECRET = ''
ND_SPOTIFY_ID = ''

# 启用 Last.fm 集成，启用true/禁用false；
ND_LASTFM_ENABLED = 'false'
# Last.fm API的公钥和私钥，默认为空；
ND_LASTFM_APIKEY = ''
ND_LASTFM_SECRET = ''
# 从 Last.fm 检索的语言，默认为'en'
ND_LASTFM_LANGUAGE = 'en'
```

2、配置systemd 自启动服务

(1) 编辑"navidrome@\<name\>.service"，将"\<name\>"改为真实用户名，如 test，用于运行程序；

```
sudo nano /etc/systemd/system/navidrome@test.service
```

```
[Unit]
Description=Navidrome Music Server and Streamer compatible with Subsonic/Airsonic
After=remote-fs.target network.target
# 配置文件的绝对路径，根据实际路径调整
AssertPathExists=/home/%i/software_home/navidrome_home/config_dir

[Install]
WantedBy=multi-user.target

[Service]
User=%i
Type=simple
TimeoutStopSec=20
KillMode=process
Restart=on-failure
# 启动程序命令，注意根据实际路径修改；
ExecStart=/home/%i/software_home/navidrome_home/navidrome --configfile "/home/%i/software_home/navidrome_home/config_dir/navidrome.toml"
WorkingDirectory=/home/%i/software_home/navidrome_home/config_dir

# See https://www.freedesktop.org/software/systemd/man/systemd.exec.html
DevicePolicy=closed
NoNewPrivileges=yes
PrivateTmp=yes
PrivateUsers=yes
ProtectControlGroups=yes
ProtectKernelModules=yes
ProtectKernelTunables=yes
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6
RestrictNamespaces=yes
RestrictRealtime=yes
SystemCallFilter=~@clock @debug @module @mount @obsolete @reboot @setuid @swap
# 允许服务读写指定的路径，当权限不满足时会导致服务启动失败，启动失败请注释掉这一行。
ReadWritePaths=/home/%i/software_home/navidrome_home/config_dir

# You can uncomment the following line if you're not using the jukebox This
# will prevent navidrome from accessing any real (physical) devices
#PrivateDevices=yes

# You can change the following line to `strict` instead of `full` if you don't
# want navidrome to be able to write anything on your filesystem outside of
# /var/lib/navidrome.
ProtectSystem=full

# You can uncomment the following line if you don't have any media in /home/*.
# This will prevent navidrome from ever reading/writing anything there.
#ProtectHome=true

# You can customize some Navidrome config options by setting environment variables here. Ex:
#Environment=ND_BASEURL="/navidrome"
```

> 使配置生效

```
sudo systemctl daemon-reload
sudo systemctl start navidrome@test.service
sudo systemctl status navidrome@test.service
sudo systemctl enable navidrome@test.service
```

3、网页端访问地址

> 首次登陆需要设置管理员账户/密码；默认端口：4533

```
http://<ip>:4533
例：http://192.168.1.54:4533
```

*在线帮助文档：[Linux Install · Navidrome](https://www.navidrome.org/docs/installation/linux/) 

### Koel

简介：Koel 是一个开源的完整的音乐流媒体解决方案，UI设计现代化，可托管和流式传输您自己的音乐收藏。除了标准的音频流功能外，Koel 还包含大量开箱即用的附加功能，包括透明 FLAC 支持、跨设备播放同步、收藏夹、历史记录跟踪、智能播放列表、多用户支持、均衡器设置、可视化工具、转码等，Koel由两部分组成：服务器和客户端；服务器是充当 API 的 Laravel 应用程序，客户端是负责用户界面的 Vue.js 应用程序。官方承诺Koel 的社区版本将始终免费且开源，高级增强功能则可以考虑Koel Plus。详见：[Koel · 官网](https://koel.dev/)。

![image-20241029100424542](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410291004480.png)

> [!NOTE]
>
> 服务器端的要求：
>
> - Laravel 的所有要求– PHP >= 8.1 以及所需的扩展
> - Laravel 支持的任何数据库 – MySQL、MariaDB、PostgreSQL 或 SQLite
>
> 客户端：支持 Chrome 47、Firefox 42、Safari 8、Opera 34 和 Edge，建议使用最新版本。

程序包：[koel-v7.1.0.tar.gz](https://github.com/koel/koel/releases/download/v7.1.0/koel-v7.1.0.tar.gz) | [Releases · koel](https://github.com/koel/koel/releases) | [koel · Github](https://github.com/koel/koel?tab=readme-ov-file) 

注意！！！**非常喜欢它的UI风格，但尝试了很多次，有些依赖不能安装在i386架构的Debian上，以至于无法启动服务，非常可惜。**

帮助文档：[使用手册 · koel](https://docs.koel.dev/guide/what-is-koel) | [Ubuntu安装koel](https://docs.vultr.com/how-to-install-koel-on-ubuntu-18-04-lts) | [Ubuntu 安装与设置 Koel](https://www.atlantic.net/vps-hosting/setup-personal-audio-streaming-server-with-koel-on-ubuntu-20-04/) | 

### LMS

简介：*LMS* 全名：**Lightweight Music Server** ，是一款自托管音乐流媒体软件，使用web界面从任何地方访问您的音乐收藏。主要功能包含音乐库管理、音乐推荐、社交分享、访问控制和自定义界面。详见：[Lightweight Music Server · Github](https://github.com/epoupon/lms?tab=readme-ov-file)。

![image-20241029121859633](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410291219731.png)

**注意！！！无法安装在i386架构的Debian上。**

### Mopidy

简介：Mopidy 是一个用 Python 编写的可扩展音乐服务器。它可在具有网络连接和音频输出的 Linux 计算机或 Mac 的终端或后台运行，播放本地磁盘中的音乐，可以使用各种 MPD 和 Web 客户端从任何手机、平板电脑或计算机编辑播其放列表。通过扩展，还可以播放来自 Spotify、SoundCloud 和 TuneIn 等云服务的音乐。Mopidy 又是一个开箱即用的 HTTP 服务器，通过扩展也能成为 MPD 服务器，许多用于控制 Mopidy 的附加前端可作为扩展使用。详见：[关于 · Mopidy](https://mopidy.com/)。

![iris](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410291417261.jpg)

> [!NOTE]
>
> Mopidy 相当于一个本地播放器，不对音乐进行流转，只是在运行它的设备上播放声音，Mopidy 的web客户端作用是控制其播放的内容。若需要流转到其他设备上，则需要音频流服务器从 Mopidy 流式传输音频，主要是 [Icecast](https://docs.mopidy.com/latest/icecast/#icecast) 和 [Snapcast](https://github.com/badaix/snapcast) 。

程序包：[客户端 · Iris](https://mopidy.com/ext/iris/) |  | [Mopidy · 扩展页](https://mopidy.com/ext/) | [Mopidy · Github](https://github.com/mopidy/mopidy) 

**它能在32位的Debian运行，但本人暂时没有需求，未深入了解，在homeassistant上它用处或许大一些。**

帮助文档：[PyPI 安装 Mopidy · 文档](https://docs.mopidy.com/latest/installation/pypi/) | [配置文件 · 文档](https://docs.mopidy.com/latest/config/) | [客户端 · 文档](https://docs.mopidy.com/latest/clients/) | 



## 视频：

### Plex

简介：Plex是一款主流的家庭媒体服务器软件，提供了一站式的多媒体资源管理方案，采用Server + Client的形式，Server端用于管理各种媒体（电影，电视剧，照片，音乐、有声小说），Client端用于播放（有Mac，PC，iOS，Android，XBox，PS，各种TV，树莓派等）；可以管理和串流本地和网络资源，还可以自动刮削海报、演职员表、影片评分、预告片、花絮、原声带和评论等相关信息，也免费提供了自己的流媒体服务，内容包括了电视剧、电影、电视节目、电视直播和音乐服务等。详见：[Plex · 官网](https://watch.plex.tv/)。

![3e69fbcd-3064-4629-807a-ad4936e1bb75](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410261800125.png)

程序包：[plexmediaserver_1.41.1.9057-af5eaea7a_i386.deb](https://downloads.plex.tv/plex-media-server-new/1.41.1.9057-af5eaea7a/debian/plexmediaserver_1.41.1.9057-af5eaea7a_i386.deb) | [Media Server · Downloads](https://www.plex.tv/zh/media-server-downloads/?cat=computer&plat=windows#plex-media-server) 

安装程序包

1、下载 Plex

```
wget https://downloads.plex.tv/plex-media-server-new/1.41.1.9057-af5eaea7a/debian/plexmediaserver_1.41.1.9057-af5eaea7a_i386.deb -O plexmediaserver_i386.deb
```

2、使用 dpkg 安装

```
sudo dpkg -i plexmediaserver_i386.deb
```

3、网页访问地址：

```
http://<ip>:32400/web
```

### FFmpeg

简介：FFmpeg 是一款免费，开源的音视频编解码工具及开发套件，用于录制、转换和流式传输音频和视频的完整的跨平台解决方案，强大的多媒体框架，可以让用户处理和操纵音频和视频文件。FFmpeg 本身是一个庞大的项目，包含许多组件和库文件，最常用的是它的命令行工具。详看：[FFmpeg · 中文网](https://ffmpeg.github.net.cn/)。

![3dd15bf4bda9e9e7558f7e95935a0ddd](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410281342703.png)

1、安装主程序

```
sudo apt update
sudo apt install ffmpeg

# 检验安装
ffmpeg -version
```

2、安装系统软件包扩展

> 可以获得额外的编解码器和过滤器支持

```
sudo apt install libavcodec-extra
sudo apt install libavfilter-extra
```

帮助文档：[FFmpeg入门教程](https://blog.csdn.net/Javachichi/article/details/131660999) | [文档 · FFmpeg中文网](https://ffmpeg.github.net.cn/documentation.html) | 



## 图片：

### PicHome

简介：欧奥PicHome 是一个专业门户网站系统，专注于图片、素材、音频、视频和文档的共享与展示。它不仅支持类似网盘的在线文件管理方式，还可导入普通文件夹、Eagle库和Billfish库等多种数据形式。通过简单设置，即可实现类似干图网和花瓣网的共享网站功能。详看：[关于 · PicHome](https://oaooa.com/pichome.html)。

![5c2d4e88-de6e-43d6-aa75-3dcc1c66131e](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410272201243.png)

PicHome程序包：[Source code(tar.gz)](https://github.com/zyx0814/Pichome/archive/refs/tags/2.1.0.tar.gz) | [Releases · Pichome](https://github.com/zyx0814/Pichome/releases) | [Pichome · Github](https://github.com/zyx0814/Pichome) 

其他：[ImageMagick · Download](https://imagemagick.org/script/download.php#linux) | [Releases · ImageMagick](https://github.com/ImageMagick/ImageMagick/releases) | 

> [!NOTE]
>
> 安装要求：
> Mysql5.1+  |  nginx 1.12+  |  PHP 7.4   （PHP环境不要太低和太高采用7.4最稳妥）

安装扩展组件及PHP配置（非必须）

> 1、图片处理组件 ImageMagick 
>
> 作用：支持更多格式的文件生成缩略图，转换图片格式。
>
> ```
> sudo apt install imagemagick
> ```
>
> 2、媒体处理组件 ffmpeg 
>
> 作用：用于生成预览视频。
>
> ```
> sudo apt install ffmpeg
> ```
>
> 3、缓存系统 memcached 
>
> 作用：提高动态 Web 应用的速度，提高网站架构的并发能力和可扩展性。
>
> ```
> sudo apt install -y memcached libmemcached libevent libevent-devel libmemcached-tools
> ```
>
> 4、Php及php-fpm配置调整，详细内容看前文"PHP-多版本共存"
>
> 注意！！！ 以上内容均可在目录导航找到详细版。

安装图库程序

> 用户目录下载 Pichome 程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/zyx0814/Pichome/archive/refs/tags/2.1.0.tar.gz -O Pichome.tar.gz
```

> 解压文件至 "Pichome"

```
# 创建目录 "pichome"
sudo mkdir -p /var/www/pichome
# 解压
sudo tar --strip-components=1 -xzf Pichome.tar.gz -C /var/www/pichome
```

> 修改拥有者/组，赋权777

```
# 更改拥有者/组
sudo chown -R www-data:www-data /var/www/pichome
```

配置nginx文件

> 编辑 "pichome.conf" ，添加代码块的内容。

```
sudo nano /etc/nginx/sites-available/pichome.conf
```

```
# 服务器块配置
server {
    # 监听端口
    listen 8395; # 默认监听 IPv4
    listen [::]:8395 default ipv6only=on; # 默认监听 IPv6
    # 服务器名称
    server_name localhost;
    
    # 日志配置
    # error_log /var/log/nginx/error.log notice; # 错误日志
    # access_log /var/log/nginx/access.log main; # 访问日志

    # 网站根目录
    root /var/www/pichome;
    # 默认首页文件
        index  index.html index.htm index.php;

        # PHP 处理
    location ~* \.php$ {
				# php-fpm 版本根据实际安装调整，推荐 7.4
        fastcgi_pass unix:/run/php/php7.2-fpm.sock; # 将请求转发给 PHP-FPM
        # fastcgi_pass  127.0.0.1:9001;
        include /etc/nginx/fastcgi_params; # 包含 FastCGI 参数配置
        fastcgi_index index.php; # 默认 PHP 索引文件
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; # 设置脚本文件路径
    }

    # 支持的文件类型
    location ~ .*\.(css|js|jpg|jpeg|gif|png|ico|webp|tiff|ttf|svg|bmp|gz|xml|zip|rar|swf|txt|xls|xlsx|flv|mid|doc|ppt|pdf|mp3|wma|exe)?$ {
            expires max; # 设置静态文件的缓存时间为无限长
            access_log off; # 禁止记录访问静态文件的日志
    }

    # 请求重写 "@rewrite;"
    location / {
            try_files $uri $uri/ @rewrite;
    }
    # 请求重写到"index.php"
    location @rewrite {
            rewrite ^/(.*)$ /index.php?q=$1;
    }

    # 错误页面
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
    }

    # 安全设置
    location ~ /\. {
        log_not_found off; # 禁止记录隐藏文件的访问日志
        deny all; # 禁止访问隐藏文件
    }
    location ^~ /.well-known {
        allow all; # 允许访问 .well-known 目录
        auth_basic off; # 禁用认证
    }
    location = /favicon.ico {
        log_not_found off; # 禁止记录 favicon.ico 的访问日志
    }
}
```

> 创建软连接

```
sudo ln -s /etc/nginx/sites-available/pichome.conf /etc/nginx/sites-enabled/
```

> 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

网页端登陆

> 首次登陆需要配置数据库和管理员账户
>
> 1、进入设置向导

```
http://<ip>:8395/install/index.php
例：http://192.168.1.54:8395/install/index.php
```

> 2、开始安装 ---> 环境检查、函数依赖性检查 ---> 目录、文件权限检查 ---> 填写数据库信息 ---> 创建管理账户
>
> ![image-20241028120126821](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410281201008.png)
>
> 3、网页访问、登陆地址

```
http://<ip>:8395
例：http://192.168.1.54:8395
```

![image-20241028120449859](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410281204743.png)

帮助文档：[PicHome · 官方文档](https://www.yuque.com/pichome/shouce/vx6n8rl1l6unkgg8) |  [Linux部署PicHome](https://www.yuque.com/pichome/shouce/du8wlfzfd9llo9rm) | 

### EasyImages2.0

简介：一款功能强大无数据库的图床 2.0版，不仅提供基本的图像处理功能，如调整大小、格式转换和压缩，还支持批量处理和自动化操作。支持多文件上传、返回图片url,markdown,bbscode,html链接，适用于Markdown、BBS代码以及HTML环境。它的环境要求极低，更符合单一场景（游客上传）和个人使用，不适于多用户复杂场景 。详看：[EasyImages2.0: 简单图床 · Github](https://github.com/icret/EasyImages2.0?tab=readme-ov-file)。

![简单图床 - 广场界面](https://github.com/icret/EasyImages2.0/raw/master/docs/images/README/3053540273.png)

> [!NOTE]
>
> 环境要求：Nginx + PHP≥7.0 + linux
>
> 建议开启OPcache

程序包：[EasyImages2.tar.gz](https://github.com/icret/EasyImages2.0/archive/refs/tags/2.8.5.tar.gz) | [Releases · EasyImages2.0](https://github.com/icret/EasyImages2.0/releases) 

安装程序包

> 用户目录下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/icret/EasyImages2.0/archive/refs/tags/2.8.5.tar.gz -O EasyImages2.tar.gz
```

> 解压程序包至 "www"

```
# 创建目录 "easyImages2"
sudo mkdir -p /var/www/easyImages2
# 解压程序包
sudo tar --strip-components=1 -xzf EasyImages2.tar.gz -C /var/www/easyImages2
```

> 更改用户名/组，赋权755

```
sudo chown -R www-data:www-data /var/www/easyImages2

sudo chmod 755 /var/www/easyImages2/app/upload.php
```

配置Nginx文件

> 编辑 "easyImage2.conf"，添加代码块的内容。

```
sudo nano /etc/nginx/sites-available/easyImage2.conf
```

```
# 服务器块配置
server {
    # 监听端口
    listen 8391; # 默认监听 IPv4
    listen [::]:8391 default ipv6only=on; # 默认监听 IPv6
    # 服务器名称
    server_name localhost;
    
    # 日志配置
    # error_log /var/log/nginx/error.log notice; # 错误日志
    # access_log /var/log/nginx/access.log main; # 访问日志

    # 网站根目录
    root /var/www/easyImages2;
    # 默认首页文件
        index  index.html index.htm index.php;

        # PHP 处理
    location ~* \.php$ {
				# php-fpm 版本根据实际安装调整，推荐 7.4
        fastcgi_pass unix:/run/php/php8.2-fpm.sock; # 将请求转发给 PHP-FPM
        # fastcgi_pass  127.0.0.1:9001;
        include /etc/nginx/fastcgi_params; # 包含 FastCGI 参数配置
        fastcgi_index index.php; # 默认 PHP 索引文件
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; # 设置脚本文件路径
    }

    # 支持的文件类型
    location ~ .*\.(css|js|jpg|jpeg|gif|png|ico|webp|tiff|ttf|svg|bmp|xml|swf|xls|xlsx|mid)?$ {
            expires max; # 设置静态文件的缓存时间为无限长
            access_log off; # 禁止记录访问静态文件的日志
    }

    # 请求重写 "@rewrite;"
    location / {
            try_files $uri $uri/ @rewrite;
    }
    # 请求重写到"index.php"
    location @rewrite {
            rewrite ^/(.*)$ /index.php?q=$1;
    }

    # 错误页面
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
    }

    # 安全设置
    location ~ /\. {
        log_not_found off; # 禁止记录隐藏文件的访问日志
        deny all; # 禁止访问隐藏文件
    }
    location ^~ /.well-known {
        allow all; # 允许访问 .well-known 目录
        auth_basic off; # 禁用认证
    }
    location = /favicon.ico {
        log_not_found off; # 禁止记录 favicon.ico 的访问日志
    }
}
```

> 创建软连接

```
sudo ln -s /etc/nginx/sites-available/easyImage2.conf /etc/nginx/sites-enabled/
```

> 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

网页访问

```
http://<ip>:port
例：http://192.168.1.54:8391
```

> 首次访问，需要配置管理员账户：安装环境检测 --> 网站基础配置
>
> ![image-20241028223218777](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410282232141.png)

修改存储目录

> 1、在数据磁盘创建一个新的存储目录"easyImage2-data"
>
> ```
> # 创建新的存储目录 "easyImage2-data"
> mkdir -p /srv/dev-disk-by-uuid-5c59f80f-c412-4953-85ed-53839444bcce/500G/easyImage2-data
> ```
>
> 2、拷贝旧数据
>
> ```
> # 拷贝数据到"easyImage2-data"
> sudo cp -r /var/www/easyImages2/i/* /home/test/500G/easyImage2-data
> 
> # 更改用户名/组
> sudo chown -R www-data:www-data /home/test/500G/easyImage2-data
> # 如需要其他用户也可以进行读写操作，则赋权777
> # sudo chmod 777 /home/test/500G/easyImage2-data
> ```
>
> 3、软连接到"easyImage2"根目录
>
> ```
> # 创建软连接
> sudo ln -s /home/test/500G/easyImage2-data /var/www/easyImages2/new-data
> ```
>
> 3、登陆管理员后台 --> 设置 --> 上传设置 --> 存储目录，填入“ /new-data/ ” 并保存。
>
> ![image-20241028230214121](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410282302534.png)

帮助文档：[EasyImages2.0 · 安装图床](https://github.com/icret/EasyImages2.0/blob/master/docs/安装图床.md) | [EasyImages 2.0 · 目录结构](https://blog.csdn.net/gitblog_00375/article/details/141046450) 

### Piwigo

简介：Piwigo 是一款功能齐全的开源网络照片库应用程序，可以用来管理和展示大量图片集与其他媒体。它广泛用于个人、团队和组织创建和管理在线相册。功能包括权限管理、主题和插件扩展、图片批量上传、元数据管理、开设评论等。Piwigo 适用于需要以组织、标签和相册形式管理大量图片的场景，如摄影师、设计师、机构和公司。详看：[关于 · Piwigo](https://cn.piwigo.org/what-is-piwigo)。

![image-20241029012043703](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410290120266.png)

> [!NOTE]
>
> 最低系统要求
>
> - "PHP 7.4+" + "Nginx/Apache" + "MySQL 5.6+/MariaDB 10.1+"
> - 图形库：ImageMagick （推荐）；PHP自带的 GD 也可以完成这项工作。
> - 需要 FTP 客户端软件来上传文件（网络安装或完整软件包）。
> - 足够的磁盘空间存储您的图片：除了您上传的照片外，Piwigo 还会将“多种尺寸”的照片存储在您服务器的缓存目录中。
>
> 可选要求
>
> - 插件Write Metadata或任何其他处理EXIF/IPTC元数据的插件都需要exiftool
> - 插件VideoJS需要ffmpeg来创建视频海报
> - 建议使用pdftopp从PDF文件生成海报（而不是ImageMagick）

程序包：[Source code(tar.gz)](https://github.com/Piwigo/Piwigo/archive/refs/tags/15.0.0.tar.gz) | [下载 · Piwigo](https://cn.piwigo.org/get-piwigo) | [Releases · Piwigo](https://github.com/Piwigo/Piwigo/releases) | [Piwigo · Github](https://github.com/Piwigo/Piwigo) 

安装程序包

用户目录下载 piwigo

```
cd ~

wget https://github.moeyy.xyz/https://github.com/Piwigo/Piwigo/archive/refs/tags/15.0.0.tar.gz -O piwigo_Source-code.tar.gz
```

解压程序包

```
sudo mkdir -p /var/www/piwigo

sudo tar --strip-components=1 -xzf piwigo_Source-code.tar.gz -C /var/www/piwigo
```

修改用户名/组

```
sudo chown -R www-data:www-data var/www/piwigo
```

配置nginx文件

编辑 "piwigo.conf"，

```
sudo nano /etc/nginx/sites-available/piwigo.conf
```

```
server {
# 设置web访问端口；
        listen 8083; # 监听ipv4端口
        listen [::]:8083; # 监听ipv6端口
# 设置服务器名称，填写域名
        server_name localhost;
# 设置根目录。
        root /var/www/piwigo;
# 设置index文件
        index index.php index.html;
# 设置location块处理静态文件
        location / {
        try_files $uri $uri/ =404;
        }
# 设置location块处理piwigo的php脚本
        location ~ \.php$ {
        fastcgi_pass unix:/run/php/php8.2-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
        }
# 设置location块处理错误页面
        location = /50x.html {
        root /usr/share/nginx/html;
        }
}
```

创建软连接

```
sudo ln -s /etc/nginx/sites-available/piwigo.conf /etc/nginx/sites-enabled/
```

加载配置

```
sudo nginx -t
sudo nginx -s reload
```

网页访问

```
http://<ip>:port
例：http://192.168.1.54:8083
```

> 首次登陆，需要配置数据库和管理员账户
>
> 1、进入安装程序向导
>
> ```
> http://<ip>:8083/install.php?language=zh_CN
> 例：http://192.168.1.54:8083/install.php?language=zh_CN
> ```
>
> 2、创建数据库 "piwigo"
>
> ```
> # 进入管理员模式
> sudo mysql -u root -p
> 
> # 创建数据库，"piwigo"
> create database piwigo;
> show databases;
> exit;
> ```
>
> 3、基本设置 -- 数据库设置 -- 管理员账户设置
>
> ![image-20241029011419568](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410290114131.png)
>
> 4、登录地址

```
http://<ip>:8083
例：http://192.168.1.54:8083
```

帮助文档：[安装/升级指南 · Piwigo](https://cn.piwigo.org/guides#install) | [手动安装 · Piwigo](https://cn.piwigo.org/guides/install/manual#step1-manual-installation) | 

### ImageMagick

简介：ImageMagick 是一个免费的开源软件套件，用于编辑和处理数字图像。它可用于创建、编辑、合成或转换位图图像，并支持多种文件格式，包括 JPEG、PNG、GIF、TIFF 和 Ultra HDR。ImageMagick 广泛应用于 Web 开发、平面设计和视频编辑等行业，以及科学研究、医学成像和天文学。ImageMagick 包括一个用于执行复杂图像处理任务的命令行界面，以及用于将其功能集成到软件应用程序的 API。它是用 C 语言编写的，可以在各种操作系统上使用，包括 Linux、Windows 和 macOS。详见：[关于 · ImageMagick](https://imagemagick.org/)。

![image-20241028145221753](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410281452730.png)

程序包：[Download · ImageMagick](https://imagemagick.org/script/download.php) | [源码包 Source code(tar.gz)](https://github.com/ImageMagick/ImageMagick/archive/refs/tags/7.1.1-39.tar.gz) | [Releases · ImageMagick](https://github.com/ImageMagick/ImageMagick/releases) |

从包管理器安装 ImageMagick

> 安装主程序

```
sudo apt install -y imagemagick
```

> 安装扩展包（可选）

```
sudo apt install -y ghostscript libjpeg-dev libpng-dev libtiff-dev libwebp-dev libgif-dev libfreetype6-dev libxml2-dev libxslt-dev libmagickcore-6.q16-6-extra libde265-dev libheif-dev libraw-dev liblqr-dev libopenjp2-7-dev 

扩展信息（按顺序）：
 - 扩展包：ghostscript - 支持处理 PostScript 和 PDF 文件。
 - 扩展包：libjpeg-dev - 用于处理 JPEG 文件;(常见格式建议安装)
 - 扩展包：libpng-dev - 用于处理 PNG 文件;(常见格式建议安装)
 - 扩展包：libtiff-dev - 用于处理 TIFF 文件;(常见格式建议安装)
 - 扩展包：libwebp-dev - 用于处理 WebP 文件;(常见格式建议安装)
 - 扩展包：libgif-dev - 用于处理 GIF 文件
 - 扩展包：libfreetype6-dev - 用于处理 TrueType 字体
 - 扩展包：libxml2-dev 和 libxslt-dev - 用于处理 XML 和 XSLT 文件
 - 扩展包：libmagickcore-6.q16-6-extra - ImageMagick 的额外编解码器
 - 扩展包：libde265-dev - 用于处理 HEVC/H.265 视频
 - 扩展包：libheif-dev - 用于处理 HEIF/HEIC 图像文件
 - 扩展包：libraw-dev - 用于处理原始图像文件（如来自相机的 CR2、NEF 等）
 - 扩展包：liblqr-dev - 用于高级图像重构和变换
 - 扩展包：libopenjp2-7-dev - 用于处理 JPEG 2000 图像
 - 扩展包：webp - 用于编码和解码WebP图像的库
```

从源码安装 ImageMagick

> 从源码可以安装到最新的版本；[ImageMagick 7 · Github](https://github.com/ImageMagick/ImageMagick) 

> 安装必要组件 build-essential ，它提供了从源代码编译软件时必要的工具和库。

```
sudo apt install -y build-essential
```

> 用户目录下载源码包，并解压到当前目录下

```
# 进入用户目录
cd ~
# 下载源码包
wget https://github.moeyy.xyz/https://github.com/ImageMagick/ImageMagick/archive/refs/tags/7.1.1-39.tar.gz -O ImageMagick7-Source_code.tar.gz
# 解压到当前目录
tar zxf ImageMagick7-Source_code.tar.gz
```

> 编译安装

```
# 进入源码目录
cd ImageMagick-7.1.1-39
# 运行脚本，配置软件的构建选项
./configure
# 安装程序
sudo make install

# 检验安装
magick --version
```

关于验证安装遇到报错信息：

> "magick: error while loading shared libraries: libMagickCore-7.Q16HDRI.so.10: cannot open shared object file: No such file or directory "

> 解决方法

```
# 添加lib 到配置文件
echo "/usr/local/lib" >>sudo  /etc/ld.so.conf
# 更新共享库缓存
sudo ldconfig

# 再次检验安装，成功将看到版本信息
magick --version
```

帮助文档：[ImageMagick · Doc](https://imagemagick.org/script/command-line-processing.php) | [Debian12源码安装ImageMagick](https://blog.csdn.net/u013541325/article/details/135288922) | 



## 同步：

### Syncthing

简介：Syncthing 是一款开源免费跨平台的文件同步工具，其独有的对等自由块交换协议，可以在两台甚至更多的设备之间同步文件，支持非常多的平台，包括 Windows、macOS、Android、Linux。Syncthing 不会将数据存储到服务器上，它只能实现多台受信任的设备之间进行数据同步，同步时必须保证同步的设备都处于开机连接状态，设备之间的通信均通过 TLS 进行。Syncthing自带内网穿透功能，文件同步过程将以P2P方式进行，对处于不同局域网中的设备同步，Syncthing 通过公共发现服务器和中继服务器实现同步功能。详见：[关于 · Syncthing](https://syncthing.net/)。

程序包：[syncthing-linux-386-v1.28.0.tar.gz](https://github.com/syncthing/syncthing/releases/download/v1.28.0/syncthing-linux-386-v1.28.0.tar.gz) | [Releases · Syncthing](https://github.com/syncthing/syncthing/releases) | [Downloads · Syncthing](https://syncthing.net/downloads/) | [Github · syncthing](https://github.com/syncthing/syncthing) 

**使用包管理安装**

> 可以通过apt管理器升级，但一般不是最新版

```
# 更新本地可用程序列表
sudo apt update
# 安装syncthing
sudo apt install -y syncthing
```

> 配置systemd自启动服务
>
> 编辑 "syncthing@\<name\>.service" ，"\<name\>"填写真实用户名，如test，用于运行sync服务。

```
sudo nano /etc/systemd/system/syncthing@test.service
```

```
[Unit]
Description=Syncthing - Open Source Continuous File Synchronization for %I
Documentation=man:syncthing(1)
After=network.target
StartLimitIntervalSec=60
StartLimitBurst=4

[Service]
User=%i
# 根据需求修改端口
ExecStart=/usr/bin/syncthing serve --no-browser --gui-address="0.0.0.0:8384" --no-restart --logflags=0
Restart=on-failure
RestartSec=1
SuccessExitStatus=3 4
RestartForceExitStatus=3 4

# Hardening
ProtectSystem=full
PrivateTmp=true
SystemCallArchitectures=native
MemoryDenyWriteExecute=true
NoNewPrivileges=true

# Elevated permissions to sync ownership (disabled by default),
# see https://docs.syncthing.net/advanced/folder-sync-ownership
#AmbientCapabilities=CAP_CHOWN CAP_FOWNER

[Install]
WantedBy=multi-user.target
```

> 加载配置，启动服务

```
sudo systemctl daemon-reload
sudo systemctl start syncthing.service
sudo systemctl status syncthing.service
sudo systemctl enable syncthing.service
```

**手动安装程序包**

> 用户目录下载 Syncthing

```
cd ~

wget https://github.moeyy.xyz/https://github.com/syncthing/syncthing/releases/download/v1.28.0/syncthing-linux-386-v1.28.0.tar.gz -O syncthing-linux-386.tar.gz
```

> 解压至 “syncthing”

```
# 创建目录 “syncthing”
mkdir -p ~/software_home/syncthing

# 解压至 “syncthing”
sudo tar --strip-components=1 -xzf syncthing-linux-386.tar.gz -C ~/software_home/syncthing
```

> 配置systemd服务
>
> 复制 "syncthing@\<name\>.service" 文件到 systemd 目录；"\<name\>"填写真实用户名。

```
sudo cp ~/software_home/syncthing/etc/linux-systemd/system/syncthing\@.service /etc/systemd/system/syncthing\@test.service
```

```
# 替换 "syncthing@\<name\>.service" 中 "ExecStart" 行，根据实际需求修改端口号；
sudo sed -i 's|ExecStart=.*|ExecStart=/home/%i/software_home/syncthing/syncthing serve --no-browser --gui-address="0.0.0.0:8384" --no-restart --logflags=0|g' /etc/systemd/system/syncthing@test.service
```

> 加载配置，启动服务

```
sudo systemctl daemon-reload
sudo systemctl start syncthing.service
sudo systemctl status syncthing.service
sudo systemctl enable syncthing.service
```

网页访问

> 默认端口：8384

```
http://<ip>:8384
例：http://192.168.1.54:8384
```

参考：[Debian 11 安装 Syncthing](https://www.yundongfang.com/Yun224160.html) | [Syncthing 设置教程](https://blog.vlinyu.com/archives/syncthing-sync-tools) | [Syncthing · 官网文档](https://docs.syncthing.net/) | [Syncthing · 命令行](https://docs.syncthing.net/users/syncthing.html) | [Syncthing · 配置文件](https://docs.syncthing.net/users/config.html) | 

### verysync

简介：微力同步 VerySync 是一款小巧简单，方便易用的文件同步软件，支持跨平台操作，支持的平台有支持 windows、mac、linux 及 Android 平台，微力同步的智能 P2P 技术加速同步，会将文件分割成若干份仅 KB 的数据同步，而文件都会进行 AES 加密处理。详看：[微力同步 · 官网](https://www.verysync.com/)。

![de26a29e-62dd-4e6c-95b5-e89709e15adf](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271924885.png)

程序包：[verysync-linux-386-v2.18.2.tar.gz](https://dl-cn.verysync.com/releases/v2.18.2/verysync-linux-386-v2.18.2.tar.gz) | [Download · 微力同步](https://www.verysync.com/download.html) 

一键安装脚本

```
#(如果需要指定索引存放位置，请在最后面添加-d 路径 如 -d /data/verysync)
curl http://www.verysync.com/shell/verysync-linux-installer/go-installer.sh > go-installer.sh
chmod +x go-installer.sh
./go-installer.sh
```

配置systemd服务

> 编辑 "verysync.service" ，调整用户和用户组，使用普通用户运行。

```
sudo nano /etc/systemd/system/verysync.service
```

```
# 将用户名(User)，用户组(Group)对应行内容，从"root"修改为创建的普通用户，如test；
User=test
Group=users
```

> 修改后重载配置

```
sudo systemctl daemon-reload
sudo systemctl restart verysync.service
```

网页端访问

> 默认端口：8886

```
http://<ip>:8886
例：http://192.168.1.54:8886
```

帮助文档：[Verysync · 使用手册](https://www.verysync.com/manual/introduction/) | [安装 · Verysync](https://www.verysync.com/manual/install/#linux) 



## 内网穿透：

### Tailscale

简介：Tailscale属于一种虚拟组网工具，使用WireGuard协议与其他客户端建立点对点直连或中继 VPN 通信，把安装了它服务的机器，都放到同一个局域网之中，支持多种操作系统和嵌入式软件系统，详见：[Tailscale · 官网](https://tailscale.com/)。

![masthead static](https://cdn.sanity.io/images/w77i7m8x/production/fab2bfd901de3d58f7f62d35fe9a5107fedc43c1-1360x725.svg?w=3840&q=75&fit=clip&auto=format)

程序包：[Download · Tailscale](https://tailscale.com/download/linux) 

注册 Tailscalse 账号：[Tailscalse 登陆](https://login.tailscale.com/login?next_url=%2Fwelcome)

一键安装脚本

```
curl -fsSL https://tailscale.com/install.sh | sh
```

> 加入 Tailscalse 局域网

```
# 启动
tailscale up

# 复制终端打印的链接，粘贴到登录了账号的浏览器打开，确认加入网络。
```

子网路由器功能

> 优势：将开启子网路由器功能的设备充当网关，将流量从尾网中继到物理子网，不需要在每台设备上安装 Tailscale 客户端，就能访问子网路由器所在内网的设备，不仅遵循访问控制策略等功能，还可以通过内网地址来访问设备。
>
> 步骤：(1) 启用IP转发；(2) 通告子网路由。

> **启用IP转发**

```
# 添加 ipv4 和 ipv6 转发规则
echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf
echo 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf

# 开启转发
sudo sysctl -p /etc/sysctl.d/99-tailscale.conf
```

> **通告子网路由**
>
> 1、先执行下方代码，代码中"routes=" 之后填入需要通告的内网网段，格式"网段/子掩网码"；

```
sudo tailscale up --advertise-routes=192.168.1.0/24,192.168.2.0/24,192.168.3.0/24
```

> 2、再登陆Tailscalse官网账号，找到对应设备（例：test2-d12-i686），点击”Edit route settings of test2-d12-i686”；在弹出选单中，勾选需要转发的网段（如：192.168.1.0/24,192.168.2.0/24），然后保存即可。
>
> 注意！！！跨网段可能需要提前配置好家庭路由器和内网防火墙。
>
> ![image-20241027172237367](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271722293.png)
>
> (可选) 禁用密钥过期：默认情况下，新设备设置了到期期限 180 天；可以在受信任的服务器、子网路由器或难以访问的远程 IoT 设备上禁用密钥过期【disable key expiry】，减少关注的精力。
>
> ![image-20241027173636116](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271736012.png)

帮助文档：[使用手册 · Tailscale](https://tailscale.com/kb/1017/install) | [子网路由 · Tailscale](https://tailscale.com/kb/1019/subnets) | [子网路由功能部署](https://ruohai.wang/202401/tailscale-subnet-router/) | [子网路由器和流量中继节点](https://tailscale.com/kb/1019/subnets) 

### Zerotier

简介：ZeroTier是一款利用 UDP 打洞来实现内网穿透的工具，相比其他工具成功率更高、部署更简单。其基本工作原理是组建一个虚拟局域网，各个设备（NAS、Linux、Windows、Mac、iOS、Android）安装了客户端、加入到这个虚拟局域网后，就会自动分配一个IP，从而实现局域网内各个设备及服务的相互访问。

![01a96581-af11-4cc9-97a1-813d15866d25](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271757420.png)

程序包：[Download - ZeroTier](https://www.zerotier.com/download/#entry-5) 

注册 ZeroTier 账号：[ZeroTier](https://accounts.zerotier.com/realms/zerotier/login-actions/registration?client_id=zt-central&tab_id=jt6pP7SwcZs) 

> 注册完成后，创建网络，获取“Network ID”
>
> ![image-20241027184109668](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271841295.png)

一键安装脚本

```
curl -s 'https://github.moeyy.xyz/https://raw.githubusercontent.com/zerotier/ZeroTierOne/main/doc/contact%40zerotier.com.gpg' | gpg --import && \  if z=$(curl -s 'https://install.zerotier.com/' | gpg); then echo "$z" | sudo bash; fi
```

> 出现图中内容表面安装成功：
>
> ![image-20241027180528662](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271805511.png)

加入虚拟网络

> 1、执行下方命令，返回 “200 join OK” 表明加入成功

```
sudo zerotier-cli join "Network ID"
例：sudo zerotier-cli join "363c67c55a8d715a"
```

> 2、官网登陆账号，对新加入的设备授权，zerotier将会给新设备分配IP地址。
>
> ![202410271838416](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271843178.png)

> 3、本地查询 zerotier 的 IP 信息
>
> ```
> sudo zerotier-cli listnetworks
> ```
>
> ![image-20241027182137140](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271821001.png)

帮助文档：[ZeroTier · 官方手册](https://docs.zerotier.com/) | [ZeroTier实现内网穿透、异地组网](https://cloud.tencent.com/developer/article/2161650) | [zerotier的基本使用(含创建网络)](https://www.wlplove.com/archives/34/) | [linux下zerotier的基本使用](https://blog.csdn.net/awzs7758520/article/details/130127967) 

### DDNS-go

简介：ddns-go 是一个自动更新域名解析到公网IP的工具，支持Mac、Windows、Linux系统，支持ARM、x86架构，简单易用的 DDNS。支持的域名服务商：阿里云、腾讯云、Dnspod、Cloudflare、华为云、Callback、百度云、Porkbun、GoDaddy、Namecheap、NameSilo、Dynadot。详见：[ddns-go · GitHub](https://github.com/jeessy2/ddns-go)。

![ddns-web](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411021150968.png)

程序包：[ddns-go_6.7.3_linux_i386.tar.gz](https://github.com/jeessy2/ddns-go/releases/download/v6.7.3/ddns-go_6.7.3_linux_i386.tar.gz) | [Releases · ddns-go](https://github.com/jeessy2/ddns-go/releases) | 

安装 ddns-go

> 下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/jeessy2/ddns-go/releases/download/v6.7.3/ddns-go_6.7.3_linux_i386.tar.gz -O ddns-go_linux_i386.tar.gz
```

> 解压程序包

```
# 创建程序目录
mkdir -p ~/software_home/ddns-go_home
# 解压
tar zxf ddns-go_linux_i386.tar.gz ~/software_home/ddns-go_home
```

> 安装 systemd 服务

```
sudo ~/software_home/ddns-go_home/ddns-go -s install
```

> 网页访问地址

```
# 默认端口：9876
http://<ip>:port
例：http://192.168.1.54:9876
```

帮助文档：[DDNS-go使用 · GitHub](https://github.com/jeessy2/ddns-go?tab=readme-ov-file#系统中使用) 

## 代理：

### TPclash

简介：TPClash(Transparent proxy tool for Clash)，是一个用于 Clash 的透明代理辅助工具，可以自动安装 Clash Premium/Meta, 并自动配置基于 Tun 的透明代理。详见：[TPClash · Github](https://github.com/TPClash/tpclash)。

```
████████╗██████╗  ██████╗██╗      █████╗ ███████╗██╗  ██╗
╚══██╔══╝██╔══██╗██╔════╝██║     ██╔══██╗██╔════╝██║  ██║
   ██║   ██████╔╝██║     ██║     ███████║███████╗███████║
   ██║   ██╔═══╝ ██║     ██║     ██╔══██║╚════██║██╔══██║
   ██║   ██║     ╚██████╗███████╗██║  ██║███████║██║  ██║
   ╚═╝   ╚═╝      ╚═════╝╚══════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝
```

二进制程序：[tpclash-mihomo-linux-386](https://github.com/TPClash/tpclash/releases/download/v0.2.6/tpclash-mihomo-linux-386) | [Releases · TPClash](https://github.com/TPClash/tpclash/releases) 

安装主程序

> 创建程序目录

```
# 进入用户目录
cd ~
# 创建 "tpclash_home"、"clash"
mkdir -p ~/software_home/tpclash_home/clash
```

> 下载 程序和配置文件

```
# 下载 tpclash
wget https://github.moeyy.xyz/https://github.com/TPClash/tpclash/releases/download/v0.2.6/tpclash-mihomo-linux-386 -P ~/software_home/tpclash_home/

# 下载配置文件模板
wget https://github.moeyy.xyz/https://github.com/TPClash/tpclash/releases/download/v0.2.6/example.yaml -P ~/software_home/tpclash_home/
```

> 赋予 tpclash 可执行权限

```
chmod +x ~/software_home/tpclash_home/tpclash-mihomo-linux-386
```

> 给配置文件添加内容

```
# 配置文件重命名
mv ~/software_home/tpclash_home/example.yaml ~/software_home/tpclash_home/clash.yaml

# 编辑配置文件，使用第三方yaml文件替换配置的内容（略）；
nano ~/software_home/tpclash_home/clash.yaml
```

创建 启动/停止 脚本

> 若不需要长期运行TPClash，只是偶尔需要使用，可以通过脚本来控制程序启停。
>
> 编辑 "tpclash.sh" ，填入代码块的内容。

```
nano ~/software_home/tpclash_home/tpclash.sh
```

```
#!/bin/bash

# 进程名称
SCRIPT_NAME="xclash"

# 路径变量
SCRIPT_DIR=$(cd "$(dirname "$0")" && pwd)
TPC_HOME=$SCRIPT_DIR
CLASH_HOME=$TPC_HOME/clash

# 临时文件路径
TMP_FILE="/tmp/xclash_ppid.txt"
TMP_FILE2="/tmp/xclash_ppid2.txt"

# 检查 xclash 进程是否正在运行
is_running() {
  if pgrep -x $SCRIPT_NAME > /dev/null; then
    return 0
  else
    return 1
  fi
}

# 启动 xclash 进程
start() {
  if is_running; then
    echo "$SCRIPT_NAME is already running."
  else
    echo "Starting $SCRIPT_NAME..."
    sudo $TPC_HOME/Tpclash-mihomo-linux-386 -c $TPC_HOME/clash.yaml -d $CLASH_HOME > /dev/null 2>&1 &
    echo "$SCRIPT_NAME started."
  fi
}

# 停止 xclash 相关的所有进程并清除僵尸进程
stop() {
  if is_running; then
    PID=$(pgrep -x $SCRIPT_NAME)
    echo "Stopping $SCRIPT_NAME..."
    # 使用 pgrep -x $SCRIPT_NAME 来获取所有相关进程的 PID
    # 使用 pgrep -P $PID 来获取所有子进程的 PID
    # 使用 pkill -x $SCRIPT_NAME 来杀死所有相关进程，包括僵尸进程
    sudo ps -ef | awk '!/grep / && /xclash/ {print $2}' > $TMP_FILE2
    sudo kill -9 $(cat /tmp/xclash_ppid2.txt)
    sudo ps -ef | awk '!/grep / && /xclash/ {print $3}' > $TMP_FILE
    sudo kill -9 $(cat /tmp/xclash_ppid.txt)
    echo "$SCRIPT_NAME stopped."
  else
    echo "$SCRIPT_NAME is not running."
  fi
}

# 输出使用帮助
usage() {
  echo "Usage: $0 {start|stop}"
  exit 1
}

# 主逻辑
select option in "Start" "Stop" "Quit"; do
  case $option in
    "Start")
      start
      break
      ;;
    "Stop")
      stop
      break
      ;;
    "Quit")
      echo "Exiting..."
      exit 0
      ;;
    *)
      echo "Invalid option. Please choose 1, 2, or 3."
      ;;
  esac
done
```

> 赋予可执行权限

```
chmod +x ~/software_home/tpclash_home/tpclash.sh
```

> 创建软连接，方便当前用户随处可启动clash；

```
ln -s /home/test/software_home/tpclash_home/tpclash.sh /home/test/.local/bin
```

> 测试执行脚本；可通过"Tab"键补全

```
tpclash.sh
```

(可选) 配置systemd自启动服务

> 若需要长期运行clash，可以使用下方命令添加 systemd 服务。

```
sudo ~/software_home/tpclash_home/tpclash-mihomo-linux-386 install
```

> 编辑 "tpclash.service" ，指定"clash.yaml"和"clash home"。详细后文：参数释义

```
sudo nano /etc/systemd/system/tpclash.service
```

```
# 只需要修改"ExecStart"行的启动信息即可
# 修改参数"--home"、"--config" 后对应的路径信息
ExecStart=/usr/local/bin/tpclash --home /home/test/software_home/tpclash_home/clash --config /home/test/software_home/tpclash_home/clash.yaml --ui yacd --check-interval 2m0s
```

> 加载配置，启动服务

```
# 重载服务配置: 
sudo systemctl daemon-reload
# 启动服务: 
sudo systemctl start tpclash
# 开启自启动: 
sudo systemctl enable tpclash
```

> 其他可用命令

```
# 停止服务: systemctl stop tpclash
# 重启服务: systemctl restart tpclash
# 关闭自启动: systemctl disable tpclash

# 查看日志: journalctl -fu tpclash
```

参数释义

```
tpclash -h		获取TPClash的帮助信息。

Usage:
  "tpclash [flags]"	
  "tpclash [command]"
  "tpclash [command] --help"	获取命令的帮助信息
  
[Commands]:
  install     添加systemd服务
  uninstall   删除systemd服务
  upgrade     升级 TPClash
  
[Flags]:
  -i, 检查远程配置的间隔时间，默认 2m0s
  -c, 指定本地或者远程[url]配置文件，默认"/etc/clash.yaml"
  -d, clash 根目录，tpclash启动后释放的文件；默认"/data/clash"
  -u, 指定网页UI面板，默认"yacd"
```

帮助文档：[TPClash/GUIDE.md](https://github.com/TPClash/tpclash/blob/master/GUIDE.md) | 

### singbox

简介：sing-box 是一个SagerNet开发的代理工具，同时支持 iOS、Apple TV、Windows、Mac、Android 等平台上使用，支持WebUI；通过规则和DNS也可以屏蔽广告。 [关于 · sing-box](https://sing-box.sagernet.org/)。

![927a7bf1-4766-49a9-86e2-2ccb768607f3](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411021231758.png)

压缩包：[sing-box_1.10.1_linux_386.deb](https://github.com/SagerNet/sing-box/releases/download/v1.10.1/sing-box_1.10.1_linux_386.deb) | [sing-box-1.11.0-alpha.2-linux-386.tar.gz](https://github.com/SagerNet/sing-box/releases/download/v1.11.0-alpha.2/sing-box-1.11.0-alpha.2-linux-386.tar.gz) | [Releases · sing-box](https://github.com/SagerNet/sing-box/releases) | [WebUI-pages.zip](https://github.com/MetaCubeX/Yacd-meta/archive/gh-pages.zip) 

安装singbox 

```
# 下载程序包
wget https://github.moeyy.xyz/https://github.com/SagerNet/sing-box/releases/download/v1.10.1/sing-box_1.10.1_linux_386.deb -O sing-box_linux_386.deb

# 安装
sudo dpkg -i sing-box_linux_386.deb
```

安装webui

```
# 下载网页UI
wget https://github.moeyy.xyz/https://github.com/MetaCubeX/Yacd-meta/archive/gh-pages.zip
# 创建程序安装目录
mkdir -p ~/software_home/singbox
# 解压至安装目录
unzip gh-pages.zip ~/software_home/singbox
```

配置singbox

> 下载配置文件

```
sudo wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/config.json -P 
/etc/sing-box/config.json
```

> 编辑配置文件 "config.json"

```
sudo /etc/sing-box/config.json
```

```
# 修改 ui 目录地址。
# 用"ctlr + w"组合键检索"external_ui"，定位后修改路径信息
"external_ui": "/home/test/software_home/singbox/Yacd-meta-gh-pages/",

# 其他重要内容自行补全（略）
```

运行

```
sudo sing-box run -c /etc/sing-box/config.json
```

网页登陆

> 默认端口：9090

```
http://<ip>:port/ui
例子：http://192.168.1.54:9090/ui
```

帮助文档：[install sing-box · 文档](https://sing-box.sagernet.org/installation/package-manager/) | [singbox配置文件1](https://lala.im/8949.html) | [singbox配置文件2](https://linux.do/t/topic/175470) 

### V2ray

简介：用于构建代理以绕过网络限制的平台。详见：[Project V · 官方网站](https://www.v2ray.com/) 

![image-20241212000211601](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202412120002577.png)

二进制文件：[v2ray-linux-32.zip](https://github.com/v2fly/v2ray-core/releases/download/v5.22.0/v2ray-linux-32.zip) | [Releases](https://github.com/v2fly/v2ray-core/releases) | [v2ray-core · GitHub](https://github.com/v2fly/v2ray-core) 

帮助文档：[下载安装 · Wiki](https://www.v2ray.com/chapter_00/install.html) 

### V2raya

简介：v2rayA 是一款 V2Ray 客户端，支持 Linux 上的全局透明代理和 Windows 和 macOS 上的系统代理，它兼容 SS、SSR、Trojan（trojan-go）、Tuic 和 [Juicity](https://github.com/juicity) 协议，[[SSR 协议列表\]](https://github.com/v2rayA/shadowsocksR/blob/main/README.md#ss-encrypting-algorithm) 。详见：[介绍 - v2rayA](https://v2raya.org/docs/prologue/introduction/) 

![img](https://camo.githubusercontent.com/efce575073971d4153c4d0c9e1869c9400bdc9f0962f6383d13f995781cb77ff/68747470733a2f2f692e6c6f6c692e6e65742f323032302f30342f31392f6774334e714f4d696166596270374c2e706e67)

程序包：[v2raya_linux_x86_2.2.6.3](https://github.com/v2rayA/v2rayA/releases/download/v2.2.6.3/v2raya_linux_x86_2.2.6.3) | [Releases](https://github.com/v2rayA/v2rayA/releases) | [v2rayA · Github](https://github.com/v2rayA/v2rayA?tab=readme-ov-file) 

帮助文档：[Debian / Ubuntu - v2rayA](https://v2raya.org/docs/prologue/installation/debian/) | 

### shadowsocks-rust

简介：shadowsocks 的 Rust 端口。详见：[shadowsocks-rust · GitHub](https://github.com/shadowsocks/shadowsocks-rust) 

![202412120008135.jpg](https://github.moeyy.xyz/https://github.com/GKK2024/Convert-an-NC10-into-a-NAS/blob/main/Images/202412120008135.jpg?raw=true)

二进制文件：[shadowsocks-v1.21.2.i686-unknown-linux-musl.tar.xz](https://github.com/shadowsocks/shadowsocks-rust/releases/download/v1.21.2/shadowsocks-v1.21.2.i686-unknown-linux-musl.tar.xz) | [Releases](https://github.com/shadowsocks/shadowsocks-rust/releases) | 

帮助文档：[shadowsocks-rust · Wiki ](https://github.com/shadowsocks/shadowsocks-rust#shadowsocks)| 



## DNS服务器：

### Adgruadhome

简介：AdGuard Home 是一款全网广告拦截与反跟踪软件，AdGuard DNS 的开源版本。通过DNS层面过滤广告、防DNS劫持，设置完成后，它将保护您的所有家庭设备，并且您不需要任何客户端软件。详看：[AdGuard Home · 官网](https://adguard.com/zh_cn/adguard-home/overview.html)。

![68747470733a2f2f63646e2e6164746964792e6f72672f7075626c69632f416467756172642f436f6d6d6f6e2f616467756172645f686f6d652e676966](https://camo.githubusercontent.com/ffaa65652afd9d7fef0a8db16a7573cff81efe6f6d35b22d7167c6eb86561864/68747470733a2f2f63646e2e6164746964792e6f72672f7075626c69632f416467756172642f436f6d6d6f6e2f616467756172645f686f6d652e676966)

程序包：[AdGuardHome_linux_386.tar.gz](https://github.com/AdguardTeam/AdGuardHome/releases/download/v0.107.53/AdGuardHome_linux_386.tar.gz) | [Releases · AdGuardHome](https://github.com/AdguardTeam/AdGuardHome/releases) | [Github · AdGuardHome](https://github.com/AdguardTeam/AdGuardHome) 

使用脚本一键安装

> 安装完成根据提示操作；脚本模式下，AD 默认安装在"/opt"目录下，位置不可调整。

```
# 使用curl进行安装，请运行以下命令：
curl -s -S -L https://github.moeyy.xyz/https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v

# 使用wget安装，请运行以下命令：
wget --no-verbose -O - https://github.moeyy.xyz/https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v
```

手动安装 AdGuardHome

> 用户目录下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/AdguardTeam/AdGuardHome/releases/download/v0.107.53/AdGuardHome_linux_386.tar.gz
```

> 解压至"software_home"

```
tar zxf AdGuardHome_linux_386.tar.gz -C ~/software_home/
```

> 创建软连接

```
sudo ln -s /home/test/software_home/AdGuardHome/AdGuardHome /usr/local/bin/
```

> 添加systemd 服务

```
sudo AdGuardHome -s install
```

> 其他命令

```
# 启动/停止服务，查看服务状态
sudo AdGuardHome -s start
sudo AdGuardHome -s stop
sudo AdGuardHome -s status
# 重新加载配置文件
sudo AdGuardHome -s reload
# 卸载/添加 systemd 服务
sudo AdGuardHome -s uninstall
sudo AdGuardHome -s install
```

网页端访问

> 首次访问需要配置接口和管理员账户/密码；
>
> 根据实际情况调整"网页管理界面"和"DNS 服务器"的接口，或者保持默认。
>
> 之后访问 AdGuardHome 使用修改过的"网页管理界面"端口，默认 3000

```
http://<ip>:port
例：http://192.168.1.54:3000
```

帮助文档：[AdGuard Home · 文档](https://adguard-dns.io/kb/zh-CN/adguard-home/getting-started/) | [设置 · AdGuard Home](https://adguard-dns.io/kb/zh-CN/adguard-home/running-securely/) | [Ad的安装及部署教程](https://isedu.top/index.php/archives/23/) | [AD快速设置](https://www.miaoer.xyz/posts/network/openwrt-adg) | [OpenWRT配置Ad实现防止DNS污染全局广告拦截](https://blog.qiaohewei.cc/2021/06/28/openwrt_adguardhome/?btwaf=18202802) | [Ad 安装及使用指北](https://sspai.com/post/63088) 

### SmartDNS

简介：SmartDNS 是一个运行在本地的 DNS 服务器，它接受来自本地客户端的 DNS 查询请求，然后从多个上游 DNS 服务器获取 DNS 查询结果，并将访问速度最快的结果返回给客户端，以此提高网络访问速度。它同时支持指定特定域名 IP 地址，并高性匹配，可达到过滤广告的效果；支持DOT(DNS over TLS)和DOH(DNS over HTTPS)，更好的保护隐私。与 DNSmasq 的 all-servers 不同，SmartDNS 返回的是访问速度最快的解析结果。

详见：[SmartDNS · 官网](https://pymumu.github.io/smartdns/)。

![smartdns-banner](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271146738.png)

程序包：[smartdns.1.2024.06.12-2222.x86-debian-all.deb](https://github.com/pymumu/smartdns/releases/download/Release46/smartdns.1.2024.06.12-2222.x86-debian-all.deb) | [smartdns.1.2024.06.12-2222.x86-linux-all.tar.gz](https://github.com/pymumu/smartdns/releases/download/Release46/smartdns.1.2024.06.12-2222.x86-linux-all.tar.gz) | [Releases · smartdns](https://github.com/pymumu/smartdns/releases) |[SmartDNS · Github](https://github.com/pymumu/smartdns) 

使用包管理器安装

> 一般不是最新版本

```
sudo apt install -y smartdns
```

手动安装程序包

> 用户目录下载smartdns "deb" 或 "tar.gz"，二择一即可。

```
# 进入用户目录
cd ~

# 下载smartdns "deb"
wget https://github.moeyy.xyz/https://github.com/pymumu/smartdns/releases/download/Release46/smartdns.1.2024.06.12-2222.x86-debian-all.deb -O smartdns.x86-debian-all.deb

# 下载smartdns "tar.gz"
wget https://github.moeyy.xyz/https://github.com/pymumu/smartdns/releases/download/Release46/smartdns.1.2024.06.12-2222.x86-linux-all.tar.gz -O smartdns.x86-linux-all.tar.gz
```

> 使用 "deb"包安装 (推荐)

```
sudo dpkg -i smartdns.x86-debian-all.deb
```

> 使用 "tar.gz" 安装

```
# 解压 
tar zxf smartdns.x86-linux-all.tar.gz
# 执行安装脚本
sudo ~/smartdns/install -i
```

配置smartdns

> 配置文件位置：" /etc/smartdns/smartdns.conf "，详细配置方法看"帮助文档"
>
> x86的smartdns是静态版本，需要调整"smartdns.conf"配置文件来实现对应功能。

帮助文档：[安装 - SmartDNS](https://pymumu.github.io/smartdns/install/linux/) | [基本配置 - SmartDNS](https://pymumu.github.io/smartdns/config/basic-config/) | [配置选项 - SmartDNS](https://pymumu.github.io/smartdns/configuration/) 



## 笔记：

### Dokuwiki

简介：DokuWiki 是一个不依赖数据库的开源维基软件，具有简洁易读的语法、内置访问控制、版本控制、丰富的扩展和多语言支持。这是一个私人项目，项目的目的是建立个人知识体系，可以用于企业知识库、私人笔记、软件手册、项目管理等。详看：[关于 · DokuWiki](https://www.dokuwiki.org/zh:dokuwiki)。

![a47c80a6-e1ca-48a2-940d-0ca39a41632a](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271001602.png)

程序包：[dokuwiki-stable.tgz](https://download.dokuwiki.org/src/dokuwiki/dokuwiki-stable.tgz) | [下载 · DokuWiki](https://download.dokuwiki.org/) | [DokuWiki · Github](https://github.com/dokuwiki/dokuwiki) 

安装主程序

>用户目录下载dokuwiki

```
cd ~

wget https://download.dokuwiki.org/src/dokuwiki/dokuwiki-stable.tgz
```

> 解压程序到"www"

```
# 创建目录 "dokuwiki"
sudo mkdir /var/www/dokuwiki
# 解压
sudo tar --strip-components=1 -xzf dokuwiki-stable.tgz -C /var/www/dokuwiki
# 更改用户名/组
sudo chown -R www-data:www-data /var/www/dokuwiki
```

配置nginx文件

> 编辑 "dokuwiki.conf"，添加代码块的内容。

```
sudo nano /etc/nginx/sites-available/dokuwiki.conf
```

```
server {
# begin_port (do not remove this label!)
listen 8392;
listen [::]:8392;
#end_port (do not remove this label!)
#begin_hostname (do not remove this label!)
server_name localhost;
#end_hostname (do not remove this label!)
#begin_docroot (do not remove this label!)
root /var/www/dokuwiki;
#end_docroot (do not remove this label!)
        index  index.html index.htm install.php index.php;

        location @rewrite {
                rewrite ^/(.*)$ /index.php?q=$1;
        }

        location / {
                try_files $uri $uri/ @rewrite;
        }

        location ~ /(data|conf|bin|inc|vendor)/ {
                deny all;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
        }

        location ~* \.php$ {
                fastcgi_pass unix:/run/php/php8.2-fpm.sock;
                #fastcgi_pass  127.0.0.1:9001;
                include /etc/nginx/fastcgi_params;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
}
```

> 创建软连接

```
sudo ln -s /etc/nginx/sites-available/dokuwiki.conf /etc/nginx/sites-enabled/
```

> 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

网页端配置

> 首次登陆需要配置管理员账户；名词解释详见：[zh:installer · DokuWiki](https://www.dokuwiki.org/zh:installer) 

```
# 安装向导
http://<ip>:port/?l=zh
例：http://192.168.1.54:8392/?l=zh

# 配置完成后删除"install.php"
sudo rm /var/www/dokuwiki/install.php
```

![屏幕截图_27-10-2024_103843_192.168.1.37](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410271039024.jpg)

网页访问地址

```
http://<ip>:port
例：http://192.168.1.54:8392
```

转移数据目录以及权限设置

> 1. 数据目录："./data"
>
> 2. 创建"new-data"目录，并软连接至dokuwiki根目录，更改为相同用户名/组或者赋予777权限，确保进程有写入权限；
> 3. 拷贝原"data"目录下的文件至"new-data"；
> 4. 更改目录位置：登陆管理员后台-管理-配置设置-DokuWiki 设置-基本设置-保存数据的目录，更改为"new-data"路径。

帮助文档：[DokuWiki · 中文使用手册](https://www.dokuwiki.org/zh:manual) | [DokuWiki · 权限设置](https://www.dokuwiki.org/zh:install:permissions) | [DokuWiki · 目录结构](https://www.dokuwiki.org/zh:devel:dirlayout?s[]=目录结构) 

### memos

简介：memos 是「一个具有知识管理和社交网络的开源、自我托管的备忘录中心」。这是一个类似私人微博的产品，支持标签、过滤、搜索、多账户，可以自用也可以和朋友一起使用，用来碎片化的记录信息，可以用来快速记录想法、学习笔记、支持导出为 PDF、HTML 和 Markdown 格式、支持第三方 API，详见：[Memos · 官网](https://www.usememos.com/)。

![demo-screenshot](https://www.usememos.com/demo.png)

二进制文件：[memos_v0.22.5_linux_386.tar.gz](https://github.com/usememos/memos/releases/download/v0.22.5/memos_v0.22.5_linux_386.tar.gz) | [Releases · Memos](https://github.com/usememos/memos/releases) | [Github](https://github.com/usememos/memos) 

安装 memos 主程序

> 用户目录下载memos

```
cd ~

wget https://github.moeyy.xyz/https://github.com/usememos/memos/releases/download/v0.22.5/memos_v0.22.5_linux_386.tar.gz -O memos_linux_386.tar.gz
```

> 解压至 "memos_home"

```
# 创建目录 "memos_home"、"data"
mkdir -p ~/software_home/memos_home/data

# 解压程序至目录"memos_home"
tar zxf memos_linux_386.tar.gz -C ~/software_home/memos_home
```

 配置systemd自启动服务

> 编辑"memos@\<name\>.service"，将"\<name\>"改为真实用户名，如 test；

```
sudo nano /etc/systemd/system/memos@test.service
```

```
[Unit]
Description=An open source,lightweight note-taking service.
After=network.target

[Service]
User=%i
Type=simple
Restart=on-failure
RestartSec=30
# 根据真实路径修改，可自定义端口
ExecStart=/home/%i/software_home/memos_home/memos --port 8397 --data "/home/%i/software_home/memos_home/data"

[Install]
WantedBy=multi-user.target
```

> 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start memos.service
sudo systemctl enable memos.service
```

网页访问

> 首次登陆需要注册管理员账户/密码

```
http://<ip>:port
例：http://192.168.1.54:8389
```

帮助文档：

[Memos使用技巧 | 不完全指南](https://blog.memos.ee/category/tech/) | [Memos 使用指南 进阶版](https://blog.memos.ee/archives/140.html) | [Memos · Doc](https://www.usememos.com/docs) 



## 博客：

### Typecho

简介：Typecho 是一款基于 PHP 的博客软件，支持多种数据库（MySQL、SQLite、PostgreSQL）、Markdown、插件和主题，简单而强大。详见：[Typecho Official Site](https://typecho.org/)。

![Typecho 系列](https://camo.githubusercontent.com/7037c3398cfbf8141a5b4e07931dfb290e574c9f3c7d0e7ea72652caebe17fdc/68747470733a2f2f7479706563686f2e6f72672f7573722f7468656d65732f626c7565636f64652f696d672f73637265656e73686f742f7374312e706e67)

程序包：[typecho.zip](https://github.com/typecho/typecho/releases/download/v1.2.1/typecho.zip) | [Releases · typecho](https://github.com/typecho/typecho/releases) | [Github](https://github.com/typecho/typecho) 

> [!NOTE]
>
> 安装要求:
>
> 1) PHP 7.4.0 或更高版本
>
> 2) 数据库（MySQL、SQLite、PostgreSQL）
>
> >```
> >- MySQL 5.5.3 或更高版本
> >- SQLite 3.7.11 或更高版本
> >- PostgreSQL 9.1 或更高版本
> >```

1、安装 tyecho 主程序

(1) 用户目录下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/typecho/typecho/releases/download/v1.2.1/typecho.zip
```

(2) 解压到 "www"，并更改拥有者；

```
sudo unzip typecho.zip -d /var/www/typecho

sudo chown -R www-data:www-data /var/www/typecho
```

2、配置nginx文件

(1) 编辑 "typecho.conf"，

```
sudo nano /etc/nginx/sites-available/typecho.conf
```

```
server {

#begin_port (do not remove this label!)
listen 8394;
listen [::]:8394;
#end_port (do not remove this label!)

#begin_hostname (do not remove this label!)
server_name localhost;
#end_hostname (do not remove this label!)

#begin_docroot (do not remove this label!)
root /var/www/typecho;
#end_docroot (do not remove this label!)

        index  index.html index.htm index.php;

        location @rewrite {
                rewrite ^/(.*)$ /index.php?q=$1;
        }

        location / {
                try_files $uri $uri/ @rewrite;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
        }

        location ~* \.php$ {
                fastcgi_pass unix:/run/php/php8.2-fpm.sock;
                #fastcgi_pass  127.0.0.1:9001;
                include /etc/nginx/fastcgi_params;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/typecho.conf /etc/nginx/sites-enabled/
```

(3) 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

3、访问管理页

(1) 进入安装向导

```
http://<ip>:port/install
例：http://192.168.1.54:8394/install
```

(2) 创建Mysql数据库

```
# 进入管理员模式
sudo mysql -u root -p

# 创建数据库，名字为"typecho"
create database typecho;
show databases;
exit;
```

(3) 初始化配置

```
数据库适配器:Pdo驱动Mysql适配器
数据库前缀:typecho_
数据库地址:localhost
数据库用户名:root		已存在/建立的用户名
数据库密码:1234		 已存在/建立的密码
数据库名：typecho	 刚创建的程序同名数据库，便于记忆
高级选项:忽略
```

(3) 创建您的管理员帐号

```
网站地址:http://192.168.1.54:8394
用户名:admin
登录密码:1234
邮件地址:temp@126.com
```

(4) 管理页地址

> 通过浏览器访问typecho前端和后端管理。

```
# 后台管理员地址
http://<ip>:port/admin/index.php
例：http://192.168.1.37:8394/admin/index.php

# 前端博客地址
http://<ip>:port
例：http://192.168.1.37:8394/
```

4、主题设置

> 主题网站：[**typechx**](https://typechx.com/) 

(1) 下载主题

```
wget https://github.moeyy.xyz/https://github.com/LWingYan/Pamper/releases/download/2.0.1%E7%89%88%E6%9C%AC/Pamper_2Xkcnn.zip
```

(2) 解压主题至"themes"目录

```
sudo unzip Pamper_2Xkcnn.zip -d /var/www/typecho/usr/themes/pamer
```

(3) 更改所有者和组

```
sudo chown -R www-data:www-data /var/www/typecho/usr/themes/pamer
```

(4) 应用主题

> 访问管理页面，登陆管理员后台-->控制台-->外观-->可以使用的外观-->启用

帮助文档：[Typecho · 文档站点](https://docs.typecho.org/) | [搭建typecho网站](https://cloud.tencent.com/developer/article/1818426) | [基于 PHP 7.4 和 MySQL 搭建 Typecho](https://blog.dsrkafuu.net/post/2020/typecho-with-nginx-und-mysql/) 



## 导航页：

### Home

简介：一款简约、优雅的静态导航页。

![image-20241026215909646](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410262159814.png)

程序包：[Home.zip 图标升级版](https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/Home.zip) | [Home导航页·图标](https://github.com/GKK2024/Convert-an-NC10-into-a-NAS/tree/main/note-files/Home_Program-icon) 

1、安装程序包

(1) 用户目录内下载 "Home"

```
cd ~

wget https://github.moeyy.xyz/https://raw.githubusercontent.com/GKK2024/Convert-an-NC10-into-a-NAS/refs/heads/main/note-files/Home.zip
```

(2) 解压至 "www"，并更改拥有者

```
sudo unzip Home.zip -d /var/www/dh_homePage

sudo chown -R www-data:www-data /var/www/dh_homePage
```

2、配置nginx文件

(1) 编辑 “homePage.conf”

```
sudo nano /etc/nginx/sites-available/homePage.conf
```

```
server{
  listen 8379;
  listen [::]:8379;
  server_name _;
  include /etc/nginx/mime.types;

  location / {
    root /var/www/dh_homePage;
    index index.html index.html;
  }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/homePage.conf /etc/nginx/sites-enabled/
```

(3) 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

3、网页端访问地址

```
http://<ip>:port
例：http://192.168.1.54:8379
```

4、调整导航图标及添加网址

(1) 添加新图标：

> 图标地址：" [Home导航页·图标](https://github.com/GKK2024/Convert-an-NC10-into-a-NAS/tree/main/note-files/Home_Program-icon)  " 
>

图标覆盖到" /var/www/dh_homePage/img/png "目录中。

(2) 添加导航地址，编辑 "index.html"；

> 通过"ctrl + w"定位需要修改的内容；

```
sudo nano /var/www/dh_homePage/index.html
```

```
 # 网页标签名称
 <title>大七links</title>		   # 可自定义" 大七links "
 
 # 页面内标题名称
 <h1>DaQi's Services</h1>		# 可自定义" DaQi's Services "
 
 # 内网页面添加导航地址
  <!-- 内网访问地址 -->		# href="网址" src="img/png/图标名称"  <strong>程序名</strong>
  
 # 外网页面添加导航地址
 <!-- 外网访问地址 -->		# 同"内网"设置
```

帮助文档：[内网导航页 · Mark's](https://www.quchao.net/Docker-nav.html) | [NAS玩家专用导航站 · 张大七](https://www.bilibili.com/video/BV1jd4y1T7Sm/?spm_id_from=333.999.0.0) 

### Van-nav

简介：Van-Nav 是一个基于 Vue.js 的轻量导航站，它提供了一系列灵活的导航栏样式和交互设计、全平台支持的轻量导航站方案。可以根据自己的需求轻松定制导航栏的外观和行为，无论是顶部固定、侧边折叠还是其他复杂布局，Van-Nav 都能够胜任。这个导航站具备以下特点：单文件部署、有配套浏览器插件，WebUI有深色、浅色模式，整体对移动端的适配更加贴合。详见：[van-nav · Github](https://github.com/Mereithhh/van-nav)。

![pad-dark](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011459236.png)

二进制文件：[van-nav_1.9.2_Linux_x86.tar.gz](https://github.com/Mereithhh/van-nav/releases/download/v1.9.2/van-nav_1.9.2_Linux_x86.tar.gz) | [Releases · van-nav](https://github.com/Mereithhh/van-nav/releases) | [VanNav · 浏览器插件](https://github.com/Mereithhh/van-nav-extension) 

1、安装主程序

(1) 用户目录内下载二进制文件

```
cd ~

wget  https://github.moeyy.xyz/https://github.com/Mereithhh/van-nav/releases/download/v1.9.2/van-nav_1.9.2_Linux_x86.tar.gz -O van-nav_x86.tar.gz
```

(2) 解压文件至 "dh_VanNav"

```
mkdir -p ~/software_home/dh_VanNav

tar zxf van-nav_x86.tar.gz -C ~/software_home/dh_VanNav/
```

2、配置systemd服务

(1) 编辑"van-nav-Page@\<name\>.service"；将"\<name\>"改为真实用户名，如 test；

```
sudo nano /etc/systemd/system/vanNav-Page@test.service
```

```
[Unit]
Description=VanNav
Documentation=https://github.com/mereithhh/van-nav
After=network.target
Wants=network.target

[Service]
User=%i
Restart=on-abnormal
RestartSec=5s
KillMode=mixed
# 填入工作目录，参数"--port"后自定义访问端口；
WorkingDirectory=/home/%i/software_home/dh_VanNav
ExecStart=/home/%i/software_home/dh_VanNav/van-nav -port 8381

StandardOutput=null
StandardError=syslog

[Install]
WantedBy=multi-user.target
```

(2) 使配置生效

```
sudo systemctl daemon-reload
sudo systemctl start vanNav-Page.service
sudo systemctl status vanNav-Page.service
sudo systemctl enable vanNav-Page.service
```

3、网页端访问

> 默认 - 账号/密码：admin/admin ; 默认 - 端口：6412
>
> 数据库" nav.db "会自动创建在当前文件夹中;

```
http://<ip>:port
例：http://192.168.1.54：8381
```

帮助文档：[Van-Nav · Github](https://github.com/Mereithhh/van-nav?tab=readme-ov-file) 

### flaring

简介：GO 语言开发的书签网址导航应用程序，**简单**、**快速**、**轻巧**且超级**易于**安装和使用，不依赖任何数据库或任何复杂的框架。WebUI适配PC和移动端，根据需要选择是否启用各种功能：离线模式、天气、编辑器、帐户等。 [关于 · flaring · Github](https://github.com/soulteary/flare)。

![f29e2b05-a72b-4b9f-8a54-e37555dca06a](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011521418.png)

程序包：[flare_0.5.2_linux_386.tar.gz](https://github.com/soulteary/flare/releases/download/0.5.2/flare_0.5.2_linux_386.tar.gz)  | [Releases · flare](https://github.com/soulteary/flare/releases)  |  原版

​		[flare_0.5.1-20240330_linux_386.tar.gz](https://github.com/LightAPIs/flaring/releases/download/0.5.1-20240330/flare_0.5.1-20240330_linux_386.tar.gz)  | [Releases · flaring](https://github.com/LightAPIs/flaring/releases)  |  修改版

1、安装主程序

(1) 用户目录下载程序包

```
cd ~ 

wget https://github.moeyy.xyz/https://github.com/soulteary/flare/releases/download/0.5.2/flare_0.5.2_linux_386.tar.gz -O flare_linux_386.tar.gz
```

(2) 解压程序包

```
mkdir -p ~/software_home/flare_home

tar zxf flare_linux_386.tar.gz -C ~/software_home/flare_home
```

2、配置systemd服务

(1) 编辑 "flare-Page@\<name\>.service"，将 "\<name\>"改为真实用户名，如test。

```
sudo nano /etc/systemd/system/flare-Page@test.service
```

```
[Unit]
Description=flare
Documentation=https://github.com/soulteary/flare
After=network.target
Wants=network.target

[Service]
User=%i
Restart=on-abnormal
RestartSec=5s
KillMode=mixed
# 填入工作目录和端口号
WorkingDirectory=/home/%i/software_home/flare_home
ExecStart=/home/%i/software_home/flare_home/flare -e -p 5005

StandardOutput=null
StandardError=syslog

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start flare-Page@test.service
sudo systemctl status flare-Page@test.service
sudo systemctl enable flare-Page@test.service
```

3、管理页地址

> 默认端口：5005

```
# 导航页
http://<ip>:port
例：http://192.168.1.54:5005
# 编辑页
http://<ip>:port/editor
例：http://192.168.1.54:5005/editor
# 图标页
http://<ip>:port/icons
例：http://192.168.1.54:5005/icons
```

4、启动参数释义

```
支持命令：
  -p, --port int            指定监听端口 (default 5005)
  -g, --guide               启用应用向导 (default true)
  -s, --visibility string   调整网站整体可见性 (default "DEFAULT")
  -m, --mini_request        使用请求最小化模式
  -o, --offline             启用离线模式
  -l, --disable_login       禁用账号登陆 (default true)
  -n, --enable_notice       启用废弃日志警告 (default true)
  -e, --enable_editor       启用编辑器 (default true)
  -c, --disable_csp         禁用CSP
  -v, --version             显示应用版本号
  -h, --help                显示帮助
```

帮助文档：[flare原版 · Github](https://github.com/soulteary/flare) | [flaring修改版 · Github](https://github.com/LightAPIs/flaring?tab=readme-ov-file) | [Flare导航页面基础配置](https://www.modb.pro/db/417875)

### Lylme

简介：六零导航页 (LyLme Spage) 致力于简洁高效无广告的上网导航和搜索入口，使用PHP+MySQL，支持后台添加链接、自定义搜索引擎。详见：[介绍 · Lylme](https://doc.lylme.com/spage/#/readme)。

![image-20241026184405652](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202410261844856.png)

程序包：[lylme_spage_v1.9.5.zip](https://github.com/LyLme/lylme_spage/releases/download/v1.9.5/lylme_spage_v1.9.5.zip) | [升级包 lylme_spage_v1.9.5_update.zip](https://github.com/LyLme/lylme_spage/releases/download/v1.9.5/lylme_spage_v1.9.5_update.zip) | [Releases](https://github.com/LyLme/lylme_spage/releases) | [六零导航页 · Github](https://github.com/LyLme/lylme_spage?tab=readme-ov-file) 

1、安装主程序

> 环境要求：PHP5.4及以上(不建议使用PHP8)、MySQL5.5及以上；本节使用php7.2。

(1) 用户目录下载程序包

```
cd ~

wget https://github.moeyy.xyz/https://github.com/LyLme/lylme_spage/releases/download/v1.9.5/lylme_spage_v1.9.5.zip
```

(2) 解压至 "www"

```
sudo unzip lylme_spage_v1.9.5.zip -d /var/www/dh_lylme
```

(3) 更改拥有者和用户组，赋权777

```
sudo chown -R www-data:www-data /var/www/dh_lylme/

sudo chmod 777 /var/www/dh_lylme/config.php /var/www/dh_lylme/install
```

2、配置Nginx文件

(1) 编辑 "lylme_spage.conf"

```
sudo nano /etc/nginx/sites-available/dh-lylme.conf
```

```
server {
#begin_port (do not remove this label!)
listen 8378;
listen [::]:8378;
#end_port (do not remove this label!)
#begin_hostname (do not remove this label!)
server_name localhost;
#end_hostname (do not remove this label!)
#begin_docroot (do not remove this label!)
root /var/www/dh_lylme;
#end_docroot (do not remove this label!)
        index  index.html index.htm index.php;

        location @rewrite {
                rewrite ^/(.*)$ /index.php?q=$1;
                rewrite ^/site-(\d+)\.html$ /site/index.php?id=$1;
                rewrite ^/sitemap.xml$ /site/sitemap.php;
        }

        location / {
                try_files $uri $uri/ @rewrite;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
        }

        location ~* \.php$ {
                fastcgi_pass unix:/run/php/php7.2-fpm.sock;
                #fastcgi_pass  127.0.0.1:9001;
                include /etc/nginx/fastcgi_params;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
}
```

(2) 创建软连接

```
sudo ln -s /etc/nginx/sites-available/dh-lylme.conf /etc/nginx/sites-enabled/
```

(3) 加载配置

```
sudo nginx -t
sudo nginx -s reload
```

3、登陆管理页

(1) 进入安装导航页

> 首次登陆需要配置数据库

```
# 进入安装向
http://<ip>:8387/install
例：http://192.168.1.54:8378/install/
```

```
# 填写数据库信息
数据库名称：lylme ;		填写程序同名名称即可，方便记忆；
数据库用户名：root ; 		填写已存在Mysql用户名，或创建新同名用户名再填入；
数据库密码：1234 ;		填写已存在Mysql用户密码，或创建新密码再填入。
```

![image-20241212122853654](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202412121229654.png)

(2) 管理页地址

>默认后台 - 账号/密码：admin/123456

```
# 前台地址：
http://<ip>:port
例：http://192.168.1.54:8378

# 后台地址：
http://<ip>:port/admin
http://192.168.1.54:8378/admin
```

帮助文档：[常规安装 · 官方手册](https://doc.lylme.com/spage/#/install) 



## Web桌面系统

### arozOS

简介：用 Go 编写，且适用于低功耗平台的 Web 桌面操作系统。Ubuntu 重新混合 Windows 风格的启动菜单和任务栏、干净易用的文件管理器（支持拖放、上传等），支持基本实时网络统计信息、UPnP 端口转发、WiFi 管理等功能。可以挂载磁盘实用程序、本地文件系统（ext4、NTFS、FAT 等）、远程文件系统（WebDAV、SMB、SFTP 等）；基于最稳定的 Linux 发行版之一 - Debian，支持在移动设备上用作 Progress WebApp （PWA），只需 512MB 系统内存和 1.5GB 系统存储空间。详见：[arozOS · GitHub](https://github.com/tobychui/arozos)。

![202411050019009.png](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411050019009.png)

程序文件：[arozos_linux_386](https://github.com/tobychui/arozos/releases/download/v2.021/arozos_linux_386) | [web.tar.gz](https://github.com/tobychui/arozos/releases/download/v2.021/web.tar.gz) | [Releases](https://github.com/tobychui/arozos/releases) 

1、安装主程序

(1) 用户目录下载程序文件

```
cd ~

wget https://github.moeyy.xyz/https://github.com/tobychui/arozos/releases/download/v2.021/arozos_linux_386

wget https://gh.llkk.cc/https://github.com/tobychui/arozos/releases/download/v2.021/web.tar.gz
```

(2) 解压至"arozOS_home"

```
mkdir -p ~/software_home/arozOS_home

mv arozos_linux_386 ~/software_home/arozOS_home/

tar zxf web.tar.gz -C ~/software_home/arozOS_home/
```

(3) 赋予执行权限

```
chmod +x ~/software_home/arozOS_home/arozos_linux_386
```

(4) 启动命令

> [支持的启动参数 · Wiki](https://github.com/tobychui/arozos#supported-startup-parameters) ；
>
> 配置文件默认路径“/etc/wpa_supplicant/wpa_supplicant.conf”

```
# 进入工作目录
cd ~/software_home/arozOS_home
# 启动
./arozos_linux_386 -allow_upnp
```

2、添加systemd服务

(1) 编辑"arozOS@\<name\>.service"，"\<name\>"改为真实用户名，如 test，用于运行程序。

```
sudo nano /etc/systemd/system/arozOS@test.service
```

```
[Unit]
Description=arozos
Wants=network-online.target
After=network-online.target

[Service]
User=%i
Type=simple
Restart=always
RestartSec=10s
ExecStart=/home/%i/software_home/arozOS_home/arozos_linux_386 -allow_upnp
WorkingDirectory=/home/%i/software_home/arozOS_home/

[Install]
WantedBy=multi-user.target
```

(2) 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start arozOS@test.service
sudo systemctl status arozOS@test.service
sudo systemctl enable arozOS@test.service
```

3、登陆页地址

> 默认端口：8080

```
http://<ip>:port
例：http://192.168.1.54:8080
```

帮助文档：[arozOS · 文档](https://github.com/tobychui/arozos/blob/master/README.md) | 

## 智能家居

### Home Assistant

简介：Home Assistant （简称：HA）是用于家庭自动化的免费开源软件。它用作集成平台和智能家居中心，允许用户控制智能家居设备。可通过基于 Web 的用户界面、使用 Android 和 iOS 的配套应用程序或通过支持的虚拟助手（如 Google Assistant、Amazon Alexa、Apple Siri）、语音命令访问，以及 Home Assistant 自己的“Assist”（内置本地语音助手）使用自然语言进行控制。它基于Python编程*语言*开发而成，可以运行ARM、ARM64、IA-32 (x86)和x64 (x86-64)等平台上。[关于 · Home Assistant](https://www.home-assistant.io/)。

![ee679cd0-273e-4e18-b9ab-0decf06ac387](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011050101.png)

程序网站：[homeassistant · PyPI](https://pypi.org/project/homeassistant/) | [Home Assistant · Github](https://github.com/home-assistant/core) | 

> [!NOTE]
>
> 本节是通过虚拟环境venv手动安装 HA 原版的过程记录，过程中极容易出错，下方是经过多次尝试后总结的步骤，并没有完全照着官网的安装步骤来，用本节方式安装一定要按照顺序来操作，防止错漏。若觉得麻烦，可以直接跳转docker版安装，区别在于docker版最新到"20230603"，而手动安装最新到"20240303"（python3.11能支持的最后一个版本），若升级python理论上还可以支持更高版本。
>
> 要注意一点，原版的 HA 在"hass"运行之后首先会创建配置文件并进入初始化配置，体现就是网页端创建管理员账号后卡在地区选择界面或则进入用户面板后显示"正在启动 HA ，请稍等"的字样，这期间 HA 会从官方仓库下载必须的文件(包)，进行安装、编译、构建，可能持续数个小时的时间，这时不要关闭 进程或者终端窗口，等就完事儿了；如果有梯子，建议把梯子搭上，可以加快下载的速度，较少网络原因造成的安装失败。
>
> 另外，在初始安装之后HA的内容占用就达到了200m，后期可能还会增加，内存小就要注意设置swap和控制应用数量了。
>
> **HA的环境要求：**
>
> - python、pip、venv、python3-dev
> - rust、wheel
> - 其他（build-essential、ffmpeg等等）

**安装步骤**

安装rust环境

> rust一般安装在当前用户，只对当前用户生效，创建并使用新用户安装HA都需要重新安装一般，这是极容易被漏掉的一部，从而导致了安装失败。详细安装步骤看 前文"开发环境部署"的rust部分。

安装python环境

> 详细的安装、设置，看前文开发环境部署"的python部分。

```
sudo apt-get install -y python3 python3-dev python3-venv python3-pip
```

安装必要组件

```
sudo apt-get install -y pkg-config libssl-dev libopenblas-dev build-essential libffi-dev libjpeg-dev libopenjp2-7 libtiff6 libturbojpeg0-dev liblapack-dev liblapack3 libatlas-base-dev zlib1g-dev bluez autoconf tzdata ffmpeg
```

创建并激活虚拟环境

```
python3 -m venv ~/software_home/homeassistant

source ~/software_home/homeassistant/bin/activate
```

> 更新pip

```
python3 -m pip install --upgrade pip

# 给当前用户设置pip加速
pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple
pip3 config set install.trusted-host mirrors.aliyun.com
```

> 安装分发系统

```
python3 -m pip install wheel
```

> 其他包安装/更新：

```
pip3 install --upgrade pip setuptools
```

安装主程序

```
pip3 install homeassistant
```

启动 HA

> 运行前，提前安装的pip包

```
pip3 install sqlalchemy aiohttp_cors home-assistant-frontend mutagen distro fuzzywuzzy netdisco xmltodict supervisor cryptography numpy
```

> 运行 HA 程序，进入初始化；

```
hass
```

网页端登陆

> 默认端口：8123

```
http://<ip>:port
例：http://192.168.1.54:8123
```

> 1、首次登陆需要创建管理账户、填写地理位置、区域等信息；若选择"国家/地区"后卡住，刷新网页即可进入下一步。![image-20241101162552959](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011625373.png)
>
> 2、刷新浏览器后进入"帮助"页，最后完成设置。注意，通过刷新浏览器进入下一步的，"完成"页一般没有其他的设备，因为初始化没有完成，组件也没有安装完全。
>
> ![image-20241101163607146](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411011636637.png)
>
> 3、最后，在概览看到"Home Assistant 正在启动，请稍等" 时，等待完成即可，可能会持续两三个小时之久，当看"用户名"就表示所有组件已经加载完成。
>
> ![image-20241102213302650](https://cdn.jsdelivr.net/gh/GKK2024/Convert-an-NC10-into-a-NAS@main/Images/202411022133744.png)

创建软连接

> 前面的所有设置完成以后，创建一个软连接指向"~/.local/bin"

```
ln -s /home/test/software_home/homeassistant/bin/hass /home/test/.local/bin
# 退出 虚拟环境
deactivate
```

配置 systemd 自动启动文件

> 编辑 "home-assistant@\<name\>"，将"\<name\>"改为真实用户名，如test；

```
sudo nano /etc/systemd/system/home-assistant@test.service
```

```
[Unit]
Description=Home Assistant
After=network-online.target

[Service]
Type=simple
User=%i
WorkingDirectory=/home/%i/.homeassistant
ExecStart=/home/%i/software_home/homeassistant/bin/hass -c "/home/%i/.homeassistant"
RestartForceExitStatus=100

[Install]
WantedBy=multi-user.target
```

> 加载配置

```
sudo systemctl daemon-reload
sudo systemctl start home-assistant@test.service
sudo systemctl status home-assistant@test.service
sudo systemctl enable home-assistant@test.service
```

帮助文档：[Home Assistant ·文档](https://www.home-assistant.io/docs/) | [linux安装HA · 文档](https://www.home-assistant.io/installation/linux) | 